import{r as c,u as Be,a as vs,j as e,L as Ae,O as os,N as ns,F as Ns,D as ws,M as Cs,C as is,b as cs,c as ds,d as He,e as ke,P as ge,f as As,T as fe,g as Le,X as ve,h as ks,U as Me,S as Te,i as Je,k as Ze,l as Ye,m as Ds,n as Ss,o as Fs,p as Es,q as Ts,s as Ie,t as Is,v as Bs,w as Rs,x as We,y as Xe,z as Ms,B as $e,R as Ls,A as te,E as Ps,G as qs}from"./vendor-react-C9fKo9Of.js";import{a as je,F as Ue}from"./vendor-pnbMItQQ.js";import{p as Gs,a as Ve}from"./vendor-pdf-CMeJnOOP.js";import{E as Vs}from"./vendor-xlsx-DaJ14Q9B.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))b(m);new MutationObserver(m=>{for(const p of m)if(p.type==="childList")for(const i of p.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&b(i)}).observe(document,{childList:!0,subtree:!0});function x(m){const p={};return m.integrity&&(p.integrity=m.integrity),m.referrerPolicy&&(p.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?p.credentials="include":m.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function b(m){if(m.ep)return;m.ep=!0;const p=x(m);fetch(m.href,p)}})();const s={primary:"#a52148",secondary:"#b9bfcf",black:"#000000",white:"#ffffff",logo_text:"#585e5c"},zs=()=>{const[a,o]=c.useState(!1),x=Be(),m=vs().pathname,i=!!(localStorage.getItem("token")||sessionStorage.getItem("token")),D=()=>{try{const d=localStorage.getItem("user")||sessionStorage.getItem("user");return d?JSON.parse(d):null}catch(d){return console.error("Error parsing user data:",d),null}},k=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),sessionStorage.removeItem("token"),sessionStorage.removeItem("user"),x("/")},r=d=>{if(!d||!d.role)return"/profile-settings";switch(d.role){case"admin":case"superadmin":return"/adminDashboard";case"manager":case"supermanager":return"/managerDashboard";default:return"/agentDashboard"}},l=D(),n=l?r(l):"/profile-settings",w=d=>m.startsWith(d);return e.jsxs("header",{className:"bg-white shadow-sm border-b border-slate-200 sticky top-0 z-50",children:[e.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsx("div",{className:"flex items-center",children:e.jsx(Ae,{to:"/",className:"flex items-center space-x-3 group",children:e.jsx("div",{className:"relative",children:e.jsx("img",{src:"/Logo.png",alt:"Logo",className:"h-10 w-auto transition-transform duration-200 group-hover:scale-105"})})})}),e.jsxs("nav",{className:"hidden md:flex items-center space-x-8",children:[i&&e.jsx(Ae,{to:n,className:`text-slate-700 hover:text-slate-900 font-medium text-sm transition-colors duration-200 relative group ${w(n)?"border-b-2 border-primary":""}`,children:"Tableau de bord"}),((l==null?void 0:l.role)==="manager"||(l==null?void 0:l.role)==="supermanager")&&e.jsx(Ae,{to:"/agentDashboard",className:` text-slate-700 hover:text-slate-900 font-medium text-sm transition-colors duration-200 relative group ${w("/agentDashboard")?"border-b-2 border-primary":""}`,children:"Tableau de d√©placement"}),i?e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:k,className:"px-6 py-2.5 rounded text-white font-semibold text-sm transition-all duration-200 hover:shadow-lg hover:scale-105 focus:outline-none focus:ring-2 focus:ring-offset-2",style:{backgroundColor:s.primary,"--tw-ring-color":`${s.primary}40`},children:"D√©connexion"}),e.jsx("div",{onClick:()=>x("/profile-settings"),className:"flex flex-col items-center cursor-pointer hover:scale-105 hover:underline",children:e.jsxs("span",{className:"text-xs text-slate-700 font-medium text-center",children:[new Date().getHours()<12?"Bonjour, ":new Date().getHours()<18?"Bon apr√®s-midi, ":"Bonsoir, ",e.jsx("span",{className:"text-primary font-bold",children:(l==null?void 0:l.nom_complete)||"Utilisateur"})]})})]}):e.jsx(Ae,{to:"/get-started",className:"ml-4 px-6 py-2.5 rounded text-white font-semibold text-sm transition-all duration-200 hover:shadow-lg hover:scale-105 focus:outline-none focus:ring-2 focus:ring-offset-2",style:{backgroundColor:s.primary,"--tw-ring-color":`${s.primary}40`},children:"Commencer"})]}),e.jsx("button",{className:"md:hidden p-2 rounded-md text-slate-700 hover:text-slate-900 hover:bg-slate-100 focus:outline-none focus:ring-2 focus:ring-inset transition-colors duration-200",style:{"--tw-ring-color":`${s.primary}40`},onClick:()=>o(!a),"aria-label":"Toggle menu","aria-expanded":a,children:e.jsx("svg",{className:"w-6 h-6 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})}),e.jsx("div",{className:`md:hidden transition-all duration-300 ease-in-out ${a?"max-h-96 opacity-100":"max-h-0 opacity-0 overflow-hidden"}`,children:e.jsxs("div",{className:"px-4 pt-2 pb-4 space-y-1 bg-white border-t border-slate-200 shadow-lg",children:[i&&e.jsx("div",{onClick:()=>{x("/profile-settings"),o(!1)},className:"block px-4 underline py-3 text-center cursor-pointer hover:bg-slate-50 rounded-md transition-colors duration-200 border-b border-slate-100 mb-2",children:e.jsxs("span",{className:"text-sm text-slate-700 font-medium",children:[new Date().getHours()<12?"Bonjour, ":new Date().getHours()<18?"Bon apr√®s-midi, ":"Bonsoir, ",e.jsx("span",{className:"text-primary font-bold",children:(l==null?void 0:l.nom_complete)||"Utilisateur"})]})}),i&&e.jsx(Ae,{to:n,className:`block px-4 py-3 text-slate-700 hover:text-slate-900 hover:bg-slate-50 rounded-md font-medium text-sm transition-colors duration-200 ${w(n)?"bg-slate-100 border-l-4 border-primary":""}`,onClick:()=>o(!1),children:"Tableau de bord"}),i&&((l==null?void 0:l.role)==="manager"||(l==null?void 0:l.role)==="supermanager")&&e.jsx(Ae,{to:"/agentDashboard",className:`block px-4 py-3 text-slate-700 hover:text-slate-900 hover:bg-slate-50 rounded-md font-medium text-sm transition-colors duration-200 ${w("/agentDashboard")?"bg-slate-100 border-l-4 border-primary":""}`,onClick:()=>o(!1),children:"Tableau de d√©placement"}),e.jsx("div",{className:"pt-2",children:i?e.jsx("button",{onClick:()=>{k(),o(!1)},className:"block w-full px-4 py-3 rounded-md text-white font-semibold text-sm text-center transition-all duration-200 hover:shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2",style:{backgroundColor:s.primary,"--tw-ring-color":`${s.primary}40`},children:"D√©connexion"}):e.jsx(Ae,{to:"/get-started",className:"block w-full px-4 py-3 rounded-md text-white font-semibold text-sm text-center transition-all duration-200 hover:shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2",style:{backgroundColor:s.primary,"--tw-ring-color":`${s.primary}40`},onClick:()=>o(!1),children:"Commencer"})})]})})]})},Qs=()=>e.jsx("footer",{className:" text-white py-6 border-t border-slate-200 ",children:e.jsxs("div",{className:"max-w-5xl mx-auto px-4 text-center",style:{color:s.logo_text},children:[e.jsx("p",{children:"¬©2025 - Lumieres Et Technologie Sarl. Tous droits r√©serv√©s."}),e.jsx("p",{children:e.jsx("a",{href:"mailto:accueil@lt.ma",className:"text-gray-400 hover:text-[#a52148]",children:"accueil@lt.ma"})})]})});function Ys(){return e.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col",children:[e.jsx(zs,{}),e.jsx("div",{className:"flex-1",children:e.jsx(os,{})}),e.jsx(Qs,{})]})}function Us(){return localStorage.getItem("token")||sessionStorage.getItem("token")?e.jsx(os,{}):e.jsx(ns,{to:"/",replace:!0})}const Js=()=>{const a=window.location.hostname;return a==="localhost"||a==="127.0.0.1"?"http://localhost:3001/api":`${window.location.origin}/api`},P=je.create({baseURL:Js(),headers:{"Content-Type":"application/json"}}),Os=()=>localStorage.getItem("token")||sessionStorage.getItem("token");P.interceptors.request.use(a=>{const o=Os();return o&&(a.headers.Authorization=`Bearer ${o}`),a},a=>Promise.reject(a));P.interceptors.response.use(a=>a,a=>{var o;return((o=a.response)==null?void 0:o.status)===401?(localStorage.removeItem("token"),localStorage.removeItem("user"),sessionStorage.removeItem("token"),sessionStorage.removeItem("user"),window.location.href="/login"):a.response||console.error("üõë Network error:",a.message),Promise.reject(a)});const _e=a=>{switch(a){case"admin":case"superadmin":case"manager":case"supermanager":return"/managerDashboard";default:return"/agentDashboard"}},Ks=()=>{const a=JSON.parse(localStorage.getItem("user")||sessionStorage.getItem("user")||"null"),o=localStorage.getItem("token")||sessionStorage.getItem("token");return{user:a,token:o}},Hs=(a,o,x)=>{const b=x?localStorage:sessionStorage;b.setItem("user",JSON.stringify(a)),b.setItem("token",o)};function Zs(){const a=Be(),[o,x]=c.useState({email:"",password:""}),[b,m]=c.useState(""),[p,i]=c.useState(""),[D,k]=c.useState(!1),[r,l]=c.useState(!1),[n,w]=c.useState(!1);c.useEffect(()=>{const{user:y,token:T}=Ks();y&&T&&a(_e(y.role))},[a]);const d=y=>{x(T=>({...T,[y.target.name]:y.target.value})),b&&(m(""),i(""))},f=async y=>{var T,E;y.preventDefault(),l(!0),m("");try{const{data:j}=await P.post("/auth/login",o);j.user&&j.token?(Hs(j.user,j.token,n),m(`Bienvenue, ${j.user.nom_complete} !`),i("success"),setTimeout(()=>{a(_e(j.user.role))},800)):(m("√âchec de la connexion. R√©ponse inattendue du serveur."),i("error"))}catch(j){const C=((E=(T=j.response)==null?void 0:T.data)==null?void 0:E.error)||"Erreur r√©seau. Veuillez v√©rifier votre connexion.";m(C),i("error")}finally{l(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-2",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Bienvenue"}),e.jsx("p",{className:"text-slate-600 mt-1",children:"Connectez-vous pour acc√©der √† votre compte"})]}),e.jsxs("form",{onSubmit:f,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 mb-1",children:"Adresse email"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})})}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:o.email,onChange:d,className:"block w-full pl-10 pr-3 py-2.5 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-2 focus:border-transparent sm:text-sm transition-colors",style:{focusRingColor:`${s.primary}40`,"--tw-ring-color":`${s.primary}40`},placeholder:"vous@exemple.com"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700",children:"Mot de passe"}),e.jsx("a",{href:"#",className:"text-sm font-medium hover:underline transition-colors",style:{color:s.primary},children:"Mot de passe oubli√© ?"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),e.jsx("input",{id:"password",name:"password",type:D?"text":"password",autoComplete:"current-password",required:!0,value:o.password,onChange:d,className:"block w-full pl-10 pr-10 py-2.5 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-2 focus:border-transparent sm:text-sm transition-colors",style:{focusRingColor:`${s.primary}40`,"--tw-ring-color":`${s.primary}40`},placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"}),e.jsx("button",{type:"button",onClick:()=>k(y=>!y),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-slate-400 hover:text-slate-600 transition-colors",children:D?e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})}):e.jsxs("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",onChange:y=>w(y.target.checked),className:"h-4 w-4 rounded border-slate-300 text-slate-600 focus:ring-slate-500",style:{accentColor:s.primary}}),e.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-slate-600",children:"Se souvenir de moi"})]}),b&&e.jsx("div",{className:`p-3 rounded-md ${p==="success"?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"}`,children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:p==="success"?e.jsx("svg",{className:"h-5 w-5 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}):e.jsx("svg",{className:"h-5 w-5 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm font-medium",children:b})})]})}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:r,className:"w-full flex justify-center py-2.5 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white focus:outline-none focus:ring-2 focus:ring-offset-2 transition-all duration-200 hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:s.primary,"--tw-ring-color":`${s.primary}40`},children:r?e.jsxs("div",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Connexion en cours‚Ä¶"})]}):"Se connecter"})})]})]})}function Oe({message:a,messageType:o,onClear:x,persistent:b=!1}){if(c.useEffect(()=>{if(a&&(o==="success"||o==="error"&&!b)){const p=setTimeout(()=>{x()},3e3);return()=>clearTimeout(p)}},[a,o,x,b]),!a)return null;const m=o==="success";return e.jsx("div",{className:`p-3 rounded-md transition-opacity duration-500 ${m?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"}`,children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:m?e.jsx("svg",{className:"h-5 w-5 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}):e.jsx("svg",{className:"h-5 w-5 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("div",{className:"ml-3 flex-1",children:e.jsx("p",{className:"text-sm font-medium",children:a})}),o==="error"&&b&&e.jsx("div",{className:"ml-auto pl-3",children:e.jsx("button",{onClick:x,className:"inline-flex text-red-400 hover:text-red-600 focus:outline-none focus:text-red-600",children:e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})})]})})}function Ws({form:a,onChange:o,onSubmit:x,showPassword:b,setShowPassword:m,passwordValidation:p,passwordStrength:i,strengthLabels:D,termsAccepted:k,onToggleTerms:r,isLoading:l,message:n,messageType:w,clearMessage:d}){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-2",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Cr√©er un compte"}),e.jsx("p",{className:"text-slate-600 mt-1",children:"Inscrivez-vous pour acc√©der √† la plateforme"})]}),e.jsxs("form",{onSubmit:x,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-slate-700 mb-1",children:"Nom complet"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsx("input",{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,value:a.name,onChange:o,className:"block w-full pl-10 pr-3 py-2.5 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-2 focus:border-transparent sm:text-sm transition-colors",style:{focusRingColor:`${s.primary}40`,"--tw-ring-color":`${s.primary}40`},placeholder:"Jean Dupont"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"carte_nationale",className:"block text-sm font-medium text-slate-700 mb-1",children:"CNIE"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-slate-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H4Zm10 5a1 1 0 0 1 1-1h3a1 1 0 1 1 0 2h-3a1 1 0 0 1-1-1Zm0 3a1 1 0 0 1 1-1h3a1 1 0 1 1 0 2h-3a1 1 0 0 1-1-1Zm0 3a1 1 0 0 1 1-1h3a1 1 0 1 1 0 2h-3a1 1 0 0 1-1-1Zm-8-5a3 3 0 1 1 6 0 3 3 0 0 1-6 0Zm1.942 4a3 3 0 0 0-2.847 2.051l-.044.133-.004.012c-.042.126-.055.167-.042.195.006.013.02.023.038.039.032.025.08.064.146.155A1 1 0 0 0 6 17h6a1 1 0 0 0 .811-.415.713.713 0 0 1 .146-.155c.019-.016.031-.026.038-.04.014-.027 0-.068-.042-.194l-.004-.012-.044-.133A3 3 0 0 0 10.059 14H7.942Z",clipRule:"evenodd"})})}),e.jsx("input",{id:"cnie",name:"cnie",type:"text",autoComplete:"off",required:!0,value:a.cnie,onChange:o,className:"block w-full pl-10 pr-3 py-2.5 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-2 focus:border-transparent sm:text-sm transition-colors",style:{focusRingColor:`${s.primary}40`,"--tw-ring-color":`${s.primary}40`},placeholder:"AA123456"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 mb-1",children:"Adresse e-mail"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})})}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:a.email,onChange:o,className:"block w-full pl-10 pr-3 py-2.5 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-2 focus:border-transparent sm:text-sm transition-colors",style:{focusRingColor:`${s.primary}40`,"--tw-ring-color":`${s.primary}40`},placeholder:"vous@entreprise.com"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 mb-1",children:"Mot de passe"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),e.jsx("input",{id:"password",name:"password",type:b?"text":"password",autoComplete:"new-password",required:!0,value:a.password,onChange:o,className:"block w-full pl-10 pr-10 py-2.5 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-2 focus:border-transparent sm:text-sm transition-colors",style:{focusRingColor:`${s.primary}40`,"--tw-ring-color":`${s.primary}40`},placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"}),e.jsx("button",{type:"button",onClick:()=>m(f=>!f),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-slate-400 hover:text-slate-600 transition-colors",children:b?e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):e.jsxs("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),a.password&&e.jsxs("div",{className:"mt-2 space-y-2",children:[e.jsx("div",{className:"flex space-x-1",children:[0,1,2,3].map(f=>e.jsx("div",{className:`h-1 flex-1 rounded-full transition-all duration-300 ${f<i?f===0?"bg-red-500":f===1?"bg-orange-500":f===2?"bg-yellow-500":"bg-green-500":"bg-slate-200"}`},f))}),e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("p",{className:"text-slate-500",children:["Force du mot de passe :"," ",e.jsx("span",{className:"font-medium",children:i>0?D[i-1]:"Trop faible"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:`flex items-center space-x-2 ${p.requirements.length?"text-green-600":"text-red-500"}`,children:[e.jsx("span",{className:"text-xs",children:p.requirements.length?"‚úì":"‚úó"}),e.jsx("span",{children:"Au moins 8 caract√®res"})]}),e.jsxs("div",{className:`flex items-center space-x-2 ${p.requirements.uppercase?"text-green-600":"text-red-500"}`,children:[e.jsx("span",{className:"text-xs",children:p.requirements.uppercase?"‚úì":"‚úó"}),e.jsx("span",{children:"Une majuscule"})]}),e.jsxs("div",{className:`flex items-center space-x-2 ${p.requirements.number?"text-green-600":"text-red-500"}`,children:[e.jsx("span",{className:"text-xs",children:p.requirements.number?"‚úì":"‚úó"}),e.jsx("span",{children:"Un chiffre"})]}),e.jsxs("div",{className:`flex items-center space-x-2 ${p.requirements.special?"text-green-600":"text-red-500"}`,children:[e.jsx("span",{className:"text-xs",children:p.requirements.special?"‚úì":"‚úó"}),e.jsx("span",{children:"Un caract√®re sp√©cial"})]})]})]})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex items-center h-5",children:e.jsx("input",{id:"terms",name:"terms",type:"checkbox",checked:k,onChange:r,className:"h-4 w-4 rounded border-slate-300 text-slate-600 focus:ring-slate-500",style:{accentColor:s.primary}})}),e.jsx("div",{className:"ml-3 text-sm",children:e.jsxs("label",{htmlFor:"terms",className:"text-slate-600",children:["J'accepte les"," ",e.jsx("a",{href:"#",className:"font-medium hover:underline transition-colors",style:{color:s.primary},children:"Conditions d'utilisation"})," ","et la"," ",e.jsx("a",{href:"#",className:"font-medium hover:underline transition-colors",style:{color:s.primary},children:"Politique de confidentialit√©"}),e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]})})]}),e.jsx(Oe,{message:n,messageType:w,onClear:d}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:l,className:"w-full flex justify-center py-2.5 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white focus:outline-none focus:ring-2 focus:ring-offset-2 transition-all duration-200 hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:s.primary,"--tw-ring-color":`${s.primary}40`},children:l?e.jsxs("div",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Cr√©ation du compte..."})]}):"Cr√©er un compte"})})]})]})}function Xs(){const[a,o]=c.useState({name:"",email:"",password:"",role:"agent",cnie:""}),[x,b]=c.useState(!1),[m,p]=c.useState(!1),[i,D]=c.useState(""),[k,r]=c.useState(""),[l,n]=c.useState(!1),w=c.useCallback(h=>{const t={length:h.length>=8,uppercase:/[A-Z]/.test(h),number:/[0-9]/.test(h),special:/[^A-Za-z0-9]/.test(h)},v=[];return t.length||v.push("au moins 8 caract√®res"),t.uppercase||v.push("une majuscule"),t.number||v.push("un chiffre"),t.special||v.push("un caract√®re sp√©cial"),{isValid:Object.values(t).every(Boolean),requirements:t,message:v.length>0?`Il manque : ${v.join(", ")}.`:"Mot de passe valide."}},[]),d=c.useCallback(h=>{let t=0;return h.length>=8&&t++,/[A-Z]/.test(h)&&t++,/[0-9]/.test(h)&&t++,/[^A-Za-z0-9]/.test(h)&&t++,t},[]),f=w(a.password),y=d(a.password),T=["Faible","Passable","Bon","Fort"],E=()=>{D(""),r("")},j=h=>{const{name:t,value:v}=h.target;o(L=>({...L,[t]:v})),i&&E()},C=h=>{n(h.target.checked),i&&E()},F=async h=>{if(h.preventDefault(),!l){D("Vous devez accepter les conditions d'utilisation et la politique de confidentialit√©."),r("error");return}if(!f.isValid){D(`Mot de passe invalide. ${f.message}`),r("error");return}J()},J=async()=>{var h,t;E(),p(!0);try{const v={...a};await P.post("/auth/register",v),D("Compte cr√©√© avec succ√®s ! Vous pouvez maintenant vous connecter."),r("success"),o({name:"",email:"",password:"",cnie:"",role:"agent"}),n(!1)}catch(v){const L=((t=(h=v.response)==null?void 0:h.data)==null?void 0:t.error)||"√âchec de l'inscription. Veuillez r√©essayer.";D(L),r("error")}finally{p(!1)}};return e.jsx(Ws,{form:a,onChange:j,onSubmit:F,showPassword:x,setShowPassword:b,passwordValidation:f,passwordStrength:y,strengthLabels:T,termsAccepted:l,onToggleTerms:C,isLoading:m,message:i,messageType:k,clearMessage:E})}function es(){const[a,o]=c.useState(!1);return e.jsx("main",{className:"max-w-3xl mx-auto px-4 py-12",children:e.jsxs("div",{className:"bg-white rounded shadow-md border border-slate-200 overflow-hidden max-w-md mx-auto",children:[e.jsxs("div",{className:"flex border-b border-slate-200",children:[e.jsx("button",{onClick:()=>o(!1),className:`flex-1 py-4 px-6 font-medium transition-colors cursor-pointer ${a?"text-slate-500 hover:text-slate-700":"border-b-2 text-slate-900"}`,style:{borderColor:a?"transparent":s.primary},children:"Sign In"}),e.jsx("button",{onClick:()=>o(!0),className:`flex-1 py-4 px-6 font-medium transition-colors cursor-pointer ${a?"border-b-2 text-slate-900":"text-slate-500 hover:text-slate-700"}`,style:{borderColor:a?s.primary:"transparent"},children:"Register"})]}),e.jsx("div",{className:"p-6",children:a?e.jsx(Xs,{}):e.jsx(Zs,{})})]})})}const ms="data:image/png;base64,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",xs=(a,o)=>new Date(a,o).toLocaleDateString("fr-FR",{month:"long",year:"numeric"}),us=(a,o)=>{const x={},b=new Map;a.forEach(m=>{const p=m.vehiculeRateRuleId;p&&(x[p]||(x[p]=[]),x[p].push(m))});for(const m in x){const p=x[m],i=o==null?void 0:o.find(r=>r.id===parseInt(m));if(!i)continue;const D=p.reduce((r,l)=>r+(parseFloat(l.distanceKm)||0),0);let k=0;if(D>0){if(i.conditionType==="ALL")k=D*i.rateBeforeThreshold;else if(i.conditionType==="THRESHOLD"){const l=i.thresholdKm||0,n=i.rateBeforeThreshold,w=i.rateAfterThreshold||n;D<=l?k=D*n:k=l*n+(D-l)*w}const r=i.name||i.libelle||`R√®gle ${m}`;b.set(r,{distance:D,total:k,rate:i.rateBeforeThreshold,rateAfter:i.rateAfterThreshold,threshold:i.thresholdKm,conditionType:i.conditionType})}}return b},ze=a=>{a.font={bold:!0,color:{argb:"FFFFFFFF"}},a.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FF4F81BD"}},a.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},a.alignment={vertical:"middle",horizontal:"center"}},Qe=a=>{a.columns.forEach(o=>{let x=0;o.eachCell({includeEmpty:!0},b=>{const m=(b.value||"").toString().length;m>x&&(x=m)}),o.width=x<10?12:x+4})},ss=async(a,o,x)=>{const b=xs(a,o),{trips:m,userMissionRates:p,userCarLoans:i,travelTypes:D,userInfo:k}=x,{fullName:r="N/A"}=k||{},l=new Vs.Workbook,n=l.addWorksheet("D√©tail des Trajets");n.addRow([`D√©tail des Trajets pour ${r} - ${b}`]).font={size:16,bold:!0},n.mergeCells("A1:D1"),n.getCell("A1").alignment={horizontal:"center"},n.addRow([]),n.addRow(["Date","Chantier","Distance (Km)","Type de D√©placement"]).eachCell(ze),m.forEach(I=>{var O,$;const X=((O=D.find(R=>R.id===I.typeDeDeplacementId))==null?void 0:O.nom)||"N/A";n.addRow([new Date(I.date).toLocaleDateString("fr-FR"),(($=I.chantier)==null?void 0:$.designation)||"N/A",parseFloat(I.distanceKm)||0,X])}),Qe(n);const d=l.addWorksheet("D√©penses Diverses");d.addRow([`D√©penses Diverses pour ${r} - ${b}`]).font={size:16,bold:!0},d.mergeCells("A1:C1"),d.getCell("A1").alignment={horizontal:"center"},d.addRow([]),d.addRow(["Date du Trajet","Montant (MAD)","Justificatif"]).eachCell(ze);let y=0;m.forEach(I=>{I.depenses&&I.depenses.length>0&&I.depenses.forEach(X=>{const O=parseFloat(X.montant)||0,$=d.addRow([new Date(I.date).toLocaleDateString("fr-FR"),O,X.cheminJustificatif?"Oui":"Non"]);$.getCell(2).numFmt='#,##0.00 "MAD"',y+=O})});const T=d.addRow(["Total",y,""]);T.getCell(1).font={bold:!0};const E=T.getCell(2);E.font={bold:!0},E.numFmt='#,##0.00 "MAD"',Qe(d);const C=(()=>{const I=new Map;let X=0;m.forEach(R=>{var q;Array.isArray(R.depenses)&&(X+=R.depenses.length);const A=p.find(Z=>Z.typeDeDeplacementId===R.typeDeDeplacementId);if(A){const Z=parseFloat(A.tarifParJour)||0,re=((q=D.find(le=>le.id===R.typeDeDeplacementId))==null?void 0:q.nom)||"Inconnu";I.has(Z)||I.set(Z,{count:0,total:0,name:re});const ae=I.get(Z);ae.count++,ae.total+=Z}});const O=us(m,i);let $=y;return O.forEach(R=>$+=R.total),I.forEach(R=>$+=R.total),{totalMisc:y,miscCount:X,mileageCosts:O,dailyAllowances:I,grand:$}})(),F=l.addWorksheet("R√©capitulatif"),J=l.addImage({base64:ms,extension:"png"});F.addImage(J,{tl:{col:0,row:0},ext:{width:120,height:60}}),F.mergeCells("D1:E2"),F.getCell("D1").value=`Nom et Pr√©nom : ${r}`,F.getCell("D1").alignment={horizontal:"right",vertical:"middle"},F.getCell("D1").font={size:12},F.mergeCells("A4:E4"),F.getCell("A4").value=`Note de frais ‚Äì ${b}`,F.getCell("A4").font={size:16,bold:!0},F.getCell("A4").alignment={horizontal:"center"},F.addRow([]),F.addRow(["D√©signation","Chantier","Quantit√©","Taux / J","Montant"]).eachCell(ze);const t=F.addRow(["Feuille de depens","",C.miscCount,"-",C.totalMisc]);t.getCell(5).numFmt='#,##0.00 "MAD"',t.alignment={horizontal:"right"},C.dailyAllowances.forEach(({count:I,total:X,name:O},$)=>{const R=F.addRow([`Frais journaliers (${O})`,"",I,$,X]);R.getCell(4).numFmt='#,##0.00 "MAD"',R.getCell(5).numFmt='#,##0.00 "MAD"',R.alignment={horizontal:"right"}}),C.mileageCosts.forEach(({distance:I,total:X,rate:O,conditionType:$,threshold:R,rateAfter:A},q)=>{let Z;$==="THRESHOLD"&&R&&A!==O?Z=`${O.toFixed(2)}/${A.toFixed(2)} (seuil: ${R}km)`:Z=O.toFixed(2);const re=F.addRow([`Frais kilom√©trique (${q})`,"",`${I.toFixed(2)} Km`,Z,X]);re.getCell(5).numFmt='#,##0.00 "MAD"',re.alignment={horizontal:"right"}});const v=F.addRow(["Total D√©pense","","","",C.grand]);F.mergeCells(`A${v.number}:D${v.number}`);const L=F.getCell(`A${v.number}`);L.font={bold:!0,size:12},L.alignment={horizontal:"right"};const Y=F.getCell(`E${v.number}`);Y.numFmt='#,##0.00 "MAD"',Y.font={bold:!0,size:12},Y.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFD3D3D3"}},Y.alignment={horizontal:"right"},Qe(F);const u=await l.xlsx.writeBuffer();Ue.saveAs(new Blob([u]),`Note_de_frais_${r}_${a}_${o+1}.xlsx`)},ts=async(a,o,x)=>{const b=xs(a,o);Ve.vfs=Gs.vfs,Ve.fonts={Roboto:{normal:"Roboto-Regular.ttf",bold:"Roboto-Medium.ttf",italics:"Roboto-Italic.ttf",bolditalics:"Roboto-MediumItalic.ttf"}};const p=(()=>{const{trips:r,userMissionRates:l,userCarLoans:n,travelTypes:w}=x,d=new Map;let f=0,y=0;r.forEach(j=>{var F;j.depenses&&Array.isArray(j.depenses)&&(y+=j.depenses.length,j.depenses.forEach(J=>{f+=parseFloat(J.montant)||0}));const C=l.find(J=>J.typeDeDeplacementId===j.typeDeDeplacementId);if(C){const J=parseFloat(C.tarifParJour)||0,h=((F=w.find(v=>v.id===j.typeDeDeplacementId))==null?void 0:F.nom)||"Type de d√©placement inconnu";d.has(J)||d.set(J,{count:0,total:0,name:h});const t=d.get(J);t.count+=1,t.total+=J}});const T=us(r,n);let E=f;return T.forEach(j=>E+=j.total),d.forEach(j=>E+=j.total),{totalMiscExpenses:f,miscExpensesCount:y,mileageCosts:T,dailyAllowances:d,grandTotal:E}})(),i=x.userInfo||{},D=[[{text:"D√©signation",bold:!0,fillColor:"#f0f0f0"},{text:"Chantier",bold:!0,fillColor:"#f0f0f0"},{text:"Quantit√©",bold:!0,fillColor:"#f0f0f0"},{text:"Taux / J",bold:!0,fillColor:"#f0f0f0"},{text:"Montant",bold:!0,fillColor:"#f0f0f0"}],["Feuille de depens","",{text:p.miscExpensesCount,alignment:"right"},"-",{text:p.totalMiscExpenses.toFixed(2),alignment:"right"}]];p.dailyAllowances.forEach((r,l)=>{D.push([`Frais journaliers (${r.name})`,"",{text:`${r.count}`,alignment:"right"},{text:l.toFixed(2),alignment:"right"},{text:r.total.toFixed(2),alignment:"right"}])}),p.mileageCosts.forEach((r,l)=>{let n;r.conditionType==="THRESHOLD"&&r.threshold&&r.rateAfter!==r.rate?n=`${r.rate.toFixed(2)}/${r.rateAfter.toFixed(2)} (seuil: ${r.threshold}km)`:n=r.rate.toFixed(2),D.push([`Frais kilom√©trique (${l})`,"",{text:`${r.distance.toFixed(2)} Km`,alignment:"right"},{text:n,alignment:"right"},{text:r.total.toFixed(2),alignment:"right"}])}),D.push([{text:"Total D√©pense",colSpan:4,alignment:"right",bold:!0,fillColor:"#f0f0f0"},{},{},{},{text:p.grandTotal.toFixed(2),bold:!0,alignment:"right",fillColor:"#f0f0f0"}]);const k={content:[{columns:[{image:ms,width:100,height:50},{text:`Nom et Pr√©nom : ${i.fullName||""}`,style:"userInfo",alignment:"right"}],margin:[0,0,0,20]},{text:`Note de frais - ${b}`,style:"header"},{table:{widths:["*","auto","auto","auto","auto"],body:D},layout:{hLineWidth:function(r,l){return r===0||r===l.table.body.length?2:1},vLineWidth:function(r,l){return r===0||r===l.table.widths.length?2:1},hLineColor:function(r,l){return r===0||r===l.table.body.length?"black":"gray"},vLineColor:function(r,l){return r===0||r===l.table.widths.length?"black":"gray"}}},{text:`


`},{table:{widths:["50%","50%"],body:[[{text:"Signature de l'int√©ress√©",alignment:"center",border:[!0,!0,!0,!1]},{text:"Signature du responsable",alignment:"center",border:[!0,!0,!0,!1]}],[{text:"",margin:[0,40,0,0],border:[!0,!1,!0,!0]},{text:"",margin:[0,40,0,0],border:[!0,!1,!0,!0]}]]},layout:"noBorders"}],styles:{header:{fontSize:16,bold:!0,alignment:"center",margin:[0,0,0,20]},userInfo:{fontSize:12,alignment:"right"}},defaultStyle:{fontSize:10}};try{Ve.createPdf(k).download(`Note_de_frais_${i.fullName}_${a}_${o+1}.pdf`)}catch(r){console.error("Error generating PDF:",r),alert("Une erreur est survenue lors de la g√©n√©ration du PDF")}},$s=a=>{const[o,x]=c.useState([]),[b,m]=c.useState([]),[p,i]=c.useState([]),[D,k]=c.useState([]),[r,l]=c.useState([]),[n,w]=c.useState(new Date),[d,f]=c.useState(new Set),[y,T]=c.useState({}),[E,j]=c.useState(!1),[C,F]=c.useState(!1),[J,h]=c.useState({}),[t,v]=c.useState({types:!0,trips:!0,missionRates:!0}),[L,Y]=c.useState([]),u=n.getFullYear(),I=n.getMonth(),X=()=>{var N;return a||((N=$())==null?void 0:N.id)},O=()=>{const N=localStorage.getItem("token")||sessionStorage.getItem("token"),g=N?{Authorization:`Bearer ${N}`}:{},G=X(),V=$();return G&&(V==null?void 0:V.id)!==G&&(g["X-Target-User-Id"]=G),g},$=()=>{try{const N=localStorage.getItem("user")||sessionStorage.getItem("user");if(N)return typeof N=="string"?JSON.parse(N):N}catch(N){console.error("Error parsing user data:",N)}return{}},R=()=>{const N=X(),g=$(),G=(g==null?void 0:g.id)!==N;return{trips:S(),userInfo:{fullName:G?`Utilisateur ${N}`:(g==null?void 0:g.nom_complete)||(g==null?void 0:g.name)||"N/A",isViewingOtherUser:G,targetUserId:N},userMissionRates:D,userCarLoans:r,expenseTypes:p,travelTypes:b,chantiers:L}},A=()=>ss(u,I,R()),q=()=>ts(u,I,R());c.useEffect(()=>{(async()=>{var g,G;try{const V=O(),M=X();if(!M){console.warn("No user ID available for fetching data");return}v(ce=>({...ce,types:!0,missionRates:!0}));const[Q,z,H]=await Promise.all([P.get("/travel-types",{headers:V}).catch(ce=>{var he;return console.warn("Travel types endpoint failed:",(he=ce.response)==null?void 0:he.status),{data:[]}}),P.get("/expense-types",{headers:V}).catch(ce=>{var he;return console.warn("Expense types endpoint failed:",(he=ce.response)==null?void 0:he.status),{data:[]}}),P.get("/chantiers",{headers:V}).catch(ce=>{var he;return console.warn("Chantiers endpoint failed:",(he=ce.response)==null?void 0:he.status),{data:[]}})]),W=Q.data||[],ee=z.data||[],pe=H.data||[];m(W),i(ee),Y(pe),v(ce=>({...ce,types:!1}));const Ce=await P.get(`/taux-deplacement/user/${M}`,{headers:V});k(Ce.data||[]);const Ke=await P.get(`/vehicule-rates/user/${M}`,{headers:V});l(Ke.data||[]),v(ce=>({...ce,missionRates:!1}))}catch(V){console.error("Failed to fetch types or rates:",(g=V.response)==null?void 0:g.status,((G=V.response)==null?void 0:G.data)||V.message),v(M=>({...M,types:!1,missionRates:!1})),m([{id:1,nom:"D√©placement standard"}]),i([{id:1,nom:"Frais de transport"}]),Y([]),k([]),l([])}})()},[a]),c.useEffect(()=>{(async()=>{try{v(z=>({...z,trips:!0}));const g=X();if(!g){console.warn("No user ID available for fetching trips"),x([]),v(z=>({...z,trips:!1}));return}if(!(localStorage.getItem("token")||sessionStorage.getItem("token"))){console.warn("No authentication token found. Cannot fetch trips."),x([]),v(z=>({...z,trips:!1}));return}const V=O(),M=await P.get(`/deplacements/user/${g}`,{params:{month:`${u}-${(I+1).toString().padStart(2,"0")}`},headers:{...V,"Content-Type":"application/json"},timeout:1e4});let Q;M.data&&M.data.deplacements?Q=M.data.deplacements:Q=M.data,x(Array.isArray(Q)?Q:[])}catch(g){console.error("‚ùå Failed to fetch trips:",g),g.response?console.error("Server error:",g.response.status,g.response.data):g.request&&console.error("No response from server:",g.request),x([])}finally{v(g=>({...g,trips:!1}))}})()},[u,I,a]);const Z=()=>{w(new Date(u,I-1,1)),f(new Set)},re=()=>{w(new Date(u,I+1,1)),f(new Set)},ae=()=>{w(new Date),f(new Set)},le=(N,g)=>{w(new Date(N,g,1)),f(new Set),j(!1)},Ne=N=>{const g=new Set(d);g.has(N)?g.delete(N):g.add(N),f(g)},xe=async N=>{var V,M,Q;if(C)return;if(!L||L.length===0){alert("Les chantiers ne sont pas encore charg√©s. Veuillez attendre quelques secondes et r√©essayer.");return}if(!b||b.length===0){alert("Les types de d√©placement ne sont pas encore charg√©s. Veuillez attendre quelques secondes et r√©essayer.");return}const g=L[0],G=b[0];F(!0);try{const z={date:N,chantierId:g.id,typeDeDeplacementId:g.typeDeDeplacementId||G.id,libelleDestination:g.designation||g.nom||"Destination par d√©faut",codeChantier:g.codeChantier||g.code||"",distanceKm:0,vehiculeRateRuleId:null,depenses:[]},H=O(),{data:W}=await P.post("/deplacements",z,{headers:H});x(ee=>[...ee,W])}catch(z){console.error("‚ùå Failed to add trip:",((V=z.response)==null?void 0:V.data)||z),alert(`Erreur lors de la cr√©ation du d√©placement: ${((Q=(M=z.response)==null?void 0:M.data)==null?void 0:Q.message)||z.message}`)}finally{F(!1)}},de=(N,g,G)=>{x(V=>V.map(M=>M.id===N?{...M,[g]:G}:M))},De=async(N,g,G)=>{var Q;if(C)return;F(!0);const V=o.find(z=>z.id===N);if(!V){F(!1);return}const M={date:V.date,libelleDestination:V.libelleDestination,codeChantier:V.codeChantier,typeDeDeplacementId:V.typeDeDeplacementId,chantierId:V.chantierId,distanceKm:V.distanceKm||0,vehiculeRateRuleId:V.vehiculeRateRuleId,depenses:V.depenses};if(g==="chantierId"){const z=L.find(H=>H.id===G);z&&(M.chantierId=z.id,M.typeDeDeplacementId=z.typeDeDeplacementId,M.libelleDestination=z.designation,M.codeChantier=z.codeChantier)}else if(g==="vehiculeRateRuleId")M.vehiculeRateRuleId=G;else if(g==="distanceKm"){const z=parseFloat(G);M.distanceKm=isNaN(z)?0:z}else M[g]=G;try{const z=O(),{data:H}=await P.put(`/deplacements/${N}`,M,{headers:z});x(W=>W.map(ee=>ee.id===N?H:ee))}catch(z){console.error("Failed to update trip:",((Q=z.response)==null?void 0:Q.data)||z),alert("Erreur lors de la mise √† jour du d√©placement")}finally{F(!1)}},we=async N=>{if(!C)try{F(!0);const g=O();await P.delete(`/deplacements/${N}`,{headers:g}),x(V=>V.filter(M=>M.id!==N));const G={...y};delete G[N],T(G)}catch(g){console.error("Failed to delete trip:",g)}finally{F(!1)}},ie=async N=>{if(!C){if(!p.length){console.error("No expense types available. Cannot create expense."),alert("Les types de d√©pense ne sont pas encore charg√©s. Veuillez attendre ou rafra√Æchir la page.");return}try{F(!0);const g=o.find(W=>W.id===N);if(!g)return;const V={typeDepenseId:p[0].id,montant:0,cheminJustificatif:null},M=[...g.depenses||[],V],Q={...g,depenses:M},z=O(),H=await P.put(`/deplacements/${N}`,Q,{headers:z});x(W=>W.map(ee=>ee.id===N?H.data:ee))}catch(g){console.error("Failed to add expense:",g),g.response&&console.error("Server response:",g.response.data)}finally{F(!1)}}},ye=async(N,g)=>{if(!C)try{F(!0);const G=O(),V=await P.post("/expense-types",{nom:g,description:"Cr√©√© par l'utilisateur"},{headers:G});i(M=>[...M,V.data]),h(M=>({...M,[N]:!1}))}catch(G){console.error("Failed to add expense type:",G)}finally{F(!1)}},be=async(N,g,G,V)=>{if(!C)try{F(!0);const M=o.find(ee=>ee.id===N);if(!M)return;const Q=M.depenses.map(ee=>ee.id===g?{...ee,[G]:V}:ee),z={...M,depenses:Q},H=O(),W=await P.put(`/deplacements/${N}`,z,{headers:H});x(ee=>ee.map(pe=>pe.id===N?W.data:pe))}catch(M){console.error("Failed to update expense:",M),M.response&&console.error("Server response:",M.response.data)}finally{F(!1)}},se=(N,g,G,V)=>{x(M=>M.map(Q=>Q.id===N?{...Q,depenses:Q.depenses.map(z=>z.id===g?{...z,[G]:V}:z)}:Q))},ne=async(N,g,G)=>{if(!C)try{F(!0);const V=new FormData;V.append("justificatif",G);const M={...O(),"Content-Type":"multipart/form-data"},z=(await P.post(`/deplacements/${N}/depenses/${g}/justificatif`,V,{headers:M})).data;x(H=>H.map(W=>W.id===N?{...W,depenses:W.depenses.map(ee=>ee.id===g?z:ee)}:W))}catch(V){console.error("Failed to upload file:",V)}finally{F(!1)}},_=async(N,g)=>{if(!C)try{F(!0);const G=O();await P.delete(`/deplacements/${N}/depenses/${g}/justificatif`,{headers:G}),x(V=>V.map(M=>M.id===N?{...M,depenses:M.depenses.map(Q=>Q.id===g?{...Q,cheminJustificatif:null}:Q)}:M))}catch(G){console.error("Failed to clear file:",G)}finally{F(!1)}},Se=async(N,g)=>{if(!C)try{F(!0);const G=o.find(H=>H.id===N);if(!G)return;const V=G.depenses.filter(H=>H.id!==g),M={...G,depenses:V},Q=O(),z=await P.put(`/deplacements/${N}`,M,{headers:Q});x(H=>H.map(W=>W.id===N?z.data:W))}catch(G){console.error("Failed to delete expense:",G)}finally{F(!1)}},ue=N=>Array.isArray(N)?N.reduce((g,G)=>g+(Number.parseFloat(G.montant)||0),0):0,Re=(N,g)=>{if(!N)return 0;const G=new Date(u,I,1),V=new Date(g);return o.filter(M=>{const Q=new Date(M.date);return M.vehiculeRateRuleId===N&&Q>=G&&Q<V}).reduce((M,Q)=>M+(parseFloat(Q.distanceKm)||0),0)},Fe=N=>{const g=ue(N.depenses),G=D.find(Q=>Q.typeDeDeplacementId===N.typeDeDeplacementId),V=G&&parseFloat(G.tarifParJour)||0;let M=0;if(N.vehiculeRateRuleId&&N.distanceKm){const Q=r.find(H=>H.id===N.vehiculeRateRuleId),z=parseFloat(N.distanceKm)||0;if(Q){if(Q.conditionType==="ALL")M=z*Q.rateBeforeThreshold;else if(Q.conditionType==="THRESHOLD"){const H=Q.thresholdKm||0,W=Q.rateBeforeThreshold,ee=Q.rateAfterThreshold||W,Ce=Re(N.vehiculeRateRuleId,N.date);if(Ce+z<=H)M=z*W;else if(Ce>=H)M=z*ee;else{const ce=H-Ce,he=z-ce;M=ce*W+he*ee}}}}return g+V+M},qe=N=>{const g=`${u}-${(I+1).toString().padStart(2,"0")}-${N.toString().padStart(2,"0")}`;return o.filter(G=>G.date===g)},S=()=>{const N=new Date(u,I,1),g=new Date(u,I+1,0);return o.filter(G=>{const V=new Date(G.date);return V>=N&&V<=g})},U=()=>{const N=S(),g={};for(const Q of N){const z=Q.vehiculeRateRuleId;g[z]||(g[z]=[]),g[z].push(Q)}let G=0;for(const Q in g){const H=g[Q].reduce((ee,pe)=>ee+(parseFloat(pe.distanceKm)||0),0),W=r==null?void 0:r.find(ee=>ee.id===parseInt(Q));if(!(!W||H===0)){if(W.conditionType==="ALL")G+=H*W.rateBeforeThreshold;else if(W.conditionType==="THRESHOLD"){const ee=W.thresholdKm||0,pe=W.rateBeforeThreshold,Ce=W.rateAfterThreshold||pe;H<=ee?G+=H*pe:G+=ee*pe+(H-ee)*Ce}}}const V=N.reduce((Q,z)=>Q+ue(z.depenses),0),M=N.reduce((Q,z)=>{const H=D.find(W=>W.typeDeDeplacementId===z.typeDeDeplacementId);return Q+(H&&parseFloat(H.tarifParJour)||0)},0);return G+V+M},B=()=>S().reduce((N,g)=>N+(parseFloat(g.distanceKm)||0),0),K=()=>S().reduce((N,g)=>N+g.depenses.length,0),oe=()=>new Date(u,I+1,0).getDate(),me=()=>!t.types&&!t.trips&&b.length>0&&p.length>0&&L.length>0,Ge=async(N="pdf")=>{try{const g=$(),G=R();N==="excel"?await ss(u,I,G):await ts(u,I,G);const M=["Janvier","F√©vrier","Mars","Avril","Mai","Juin","Juillet","Ao√ªt","Septembre","Octobre","Novembre","D√©cembre"][I],Q=(g==null?void 0:g.nom_complete)||(g==null?void 0:g.name)||"Agent",z=`Rapport de d√©placements - ${M} ${u} - ${Q}`,H=`Bonjour,

Veuillez trouver ci-joint mon rapport de d√©placements pour le mois de ${M} ${u}.

R√©sum√© du mois :
- Nombre de d√©placements : ${S().length}
- Distance totale : ${B().toFixed(2)} km
- Nombre de d√©penses : ${K()}
- Montant total : ${U().toFixed(2)} MAD

Cordialement,
${Q}`,W=`mailto:?subject=${encodeURIComponent(z)}&body=${encodeURIComponent(H)}`;window.open(W)}catch(g){console.error("Failed to create email:",g),alert("Erreur lors de la cr√©ation de l'email. Veuillez r√©essayer.")}};return{trips:o,travelTypes:b,expenseTypes:p,userMissionRates:D,userCarLoans:r,currentDate:n,expandedDays:d,showCodeChantier:y,showYearPicker:E,showAddExpenseType:J,currentYear:u,currentMonth:I,isUpdating:C,loadingStates:t,chantiers:L,setShowYearPicker:j,setShowAddExpenseType:h,goToPreviousMonth:Z,goToNextMonth:re,goToToday:ae,goToYearMonth:le,toggleDayExpansion:Ne,sendEmailWithReport:Ge,showEmailFormatSelection:()=>{const N=document.createElement("div");N.className="fixed inset-0 bg-black bg-opacity-30 backdrop-blur-sm flex items-center justify-center z-50",N.innerHTML=`
      <div class="bg-white/30 backdrop-blur-lg rounded-xl p-6 sm:p-8 w-full max-w-md mx-4 shadow-2xl border border-white/20 animate-fade-in">
        <h3 class="text-xl font-bold mb-6 text-white text-center drop-shadow">Choisir le format du rapport</h3>
        <div class="space-y-4">
          <button id="email-pdf" class="w-full flex items-center justify-center gap-2 px-4 py-3 bg-red-500/80 text-white text-sm font-medium rounded-lg hover:bg-red-600/90 focus:outline-none focus:ring-2 focus:ring-red-400 transition-all duration-200">
            <span>üìÑ</span>
            <span>Envoyer en PDF</span>
          </button>
          <button id="email-excel" class="w-full flex items-center justify-center gap-2 px-4 py-3 bg-emerald-500/80 text-white text-sm font-medium rounded-lg hover:bg-emerald-600/90 focus:outline-none focus:ring-2 focus:ring-emerald-400 transition-all duration-200">
            <span>üìä</span>
            <span>Envoyer en Excel</span>
          </button>
          <button id="email-cancel" class="w-full px-4 py-3 bg-white/30 text-white text-sm font-medium rounded-lg hover:bg-white/40 focus:outline-none focus:ring-2 focus:ring-white/50 transition-all duration-200">
            Annuler
          </button>
        </div>
      </div>
    `,document.body.appendChild(N),document.getElementById("email-pdf").onclick=()=>{document.body.removeChild(N),Ge("pdf")},document.getElementById("email-excel").onclick=()=>{document.body.removeChild(N),Ge("excel")},document.getElementById("email-cancel").onclick=()=>{document.body.removeChild(N)},N.onclick=g=>{g.target===N&&document.body.removeChild(N)}},addTrip:xe,updateTripField:De,updateTripLocal:de,deleteTrip:we,addExpense:ie,addExpenseType:ye,updateExpenseField:be,updateExpenseLocal:se,handleExpenseFileUpload:ne,clearExpenseFile:_,deleteExpense:Se,getTotalExpenses:ue,getTripTotal:Fe,getTripsForDay:qe,getMonthlyTrips:S,getMonthlyTotal:U,getMonthlyDistanceTotal:B,getMonthlyExpensesCount:K,getDaysInMonth:oe,exportMonthlyPDF:q,exportMonthlyExcel:A,isDataReady:me}},rs=(a,o)=>{if(!a||!o)return null;const x=o.find(b=>b.id===a);return x?{name:x.name,avatar:x.avatar}:null},as=({createdBy:a,modifiedBy:o,currentUserId:x,allUsers:b})=>{const m=rs(a,b),p=rs(o,b);return a===x&&!o?null:a&&a!==x?e.jsx("div",{className:"flex items-center space-x-1 mb-2",children:e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[e.jsx("span",{className:"w-4 h-4 rounded-full bg-blue-200 flex items-center justify-center text-[10px] font-bold mr-1",children:(m==null?void 0:m.avatar)||"M"}),"Cr√©√© par ",(m==null?void 0:m.name)||"Manager"]})}):o&&o!==x?e.jsx("div",{className:"flex items-center space-x-1 mb-2",children:e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:[e.jsx("span",{className:"w-4 h-4 rounded-full bg-orange-200 flex items-center justify-center text-[10px] font-bold mr-1",children:(p==null?void 0:p.avatar)||"M"}),"Modifi√© par ",(p==null?void 0:p.name)||"Manager"]})}):null},_s=({expenseTypes:a,expandedDays:o,showYearPicker:x,showAddExpenseType:b,currentYear:m,currentMonth:p,isUpdating:i,userCarLoans:D,chantiers:k,allUsers:r,setShowYearPicker:l,setShowAddExpenseType:n,goToPreviousMonth:w,goToNextMonth:d,goToToday:f,goToYearMonth:y,toggleDayExpansion:T,showEmailFormatSelection:E,addTrip:j,updateTripField:C,updateTripLocal:F,deleteTrip:J,addExpense:h,addExpenseType:t,updateExpenseField:v,updateExpenseLocal:L,handleExpenseFileUpload:Y,clearExpenseFile:u,deleteExpense:I,getTripTotal:X,getTripsForDay:O,getMonthlyTrips:$,getMonthlyTotal:R,getMonthlyDistanceTotal:A,getMonthlyExpensesCount:q,getDaysInMonth:Z,exportMonthlyPDF:re,exportMonthlyExcel:ae})=>{const[le,Ne]=c.useState({}),xe=localStorage.getItem("user")||sessionStorage.getItem("user"),de=xe?JSON.parse(xe):null,De=de==null?void 0:de.id,we=Array.from({length:3},(se,ne)=>new Date().getFullYear()-ne),ie=["Janvier","F√©vrier","Mars","Avril","Mai","Juin","Juillet","Ao√ªt","Septembre","Octobre","Novembre","D√©cembre"],ye=se=>{const ne=le[se];ne&&ne.trim()&&(t(se,ne.trim()),Ne(_=>({..._,[se]:""})))},be=se=>{const ne=`${m}-${(p+1).toString().padStart(2,"0")}-${se.toString().padStart(2,"0")}`,_=O(se),Se=_.reduce((S,U)=>S+X(U),0),ue=_.length>0,Re=o.has(se),Fe=se===new Date().getDate()&&p===new Date().getMonth()&&m===new Date().getFullYear(),qe=new Date(m,p,se).toLocaleDateString("fr-FR",{weekday:"long"});return e.jsxs("div",{className:`border-b ${Fe?"ring-2 ring-blue-500 ring-inset":""}`,style:{borderColor:s.secondary},children:[e.jsx("div",{className:`p-2 sm:p-3 md:p-4 hover:bg-gray-50 transition-colors cursor-pointer ${ue?"":"opacity-60"} ${Fe?"bg-blue-50":""}`,onClick:()=>ue&&T(se),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-2 sm:space-x-3 md:space-x-4 flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2 md:space-x-3 flex-shrink-0",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-lg sm:text-xl md:text-2xl font-bold ${Fe?"text-blue-600":""}`,style:{color:Fe?"#2563eb":s.logo_text},children:se}),e.jsx("div",{className:"text-xs uppercase",style:{color:s.secondary},children:qe.substring(0,3)})]}),e.jsx("div",{className:"h-5 sm:h-6 md:h-8 w-px",style:{backgroundColor:s.secondary}})]}),ue?e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"block sm:hidden",children:e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:s.primary}}),e.jsxs("span",{className:"text-xs font-medium truncate",style:{color:s.logo_text},children:[_.length," d√©placement",_.length>1?"s":""]}),e.jsxs("span",{className:"text-xs px-1.5 py-0.5 rounded-full flex-shrink-0",style:{backgroundColor:s.secondary+"20",color:s.logo_text},children:[_.reduce((S,U)=>S+U.depenses.length,0)," d√©p."]})]}),e.jsxs("div",{className:"flex items-center space-x-1.5",children:[e.jsx(ke,{className:"w-3 h-3 flex-shrink-0",style:{color:s.secondary}}),e.jsx("span",{className:"text-xs truncate",style:{color:s.logo_text},children:_.map(S=>{const U=k.find(B=>B.id===S.chantierId);return S.libelleDestination||(U==null?void 0:U.designation)||"Non d√©finie"}).join(", ")})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-xs font-medium",style:{color:s.logo_text},children:[_.reduce((S,U)=>S+(Number.parseFloat(U.distanceKm)||0),0).toFixed(0)," km"]}),e.jsxs("span",{className:"text-xs font-medium",style:{color:s.primary},children:[Se," MAD"]}),(()=>{const S=_.flatMap(me=>me.depenses),U=S.filter(me=>me.cheminJustificatif),B=S.length;if(B===0)return null;const K=U.length===B,oe=U.length>0&&U.length<B;return e.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded-full font-medium ${K?"bg-green-100 text-green-800":oe?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:K?"‚úì":oe?`${U.length}/${B}`:"‚úó"})})()]})})]})}),e.jsx("div",{className:"hidden sm:block lg:hidden",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:s.primary}}),e.jsxs("span",{className:"text-sm font-medium",style:{color:s.logo_text},children:[_.length," d√©placement",_.length>1?"s":""]}),e.jsxs("span",{className:"text-xs px-2 py-1 rounded-full",style:{backgroundColor:s.secondary+"20",color:s.logo_text},children:[_.reduce((S,U)=>S+U.depenses.length,0)," d√©pense",_.reduce((S,U)=>S+U.depenses.length,0)>1?"s":""]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ke,{className:"w-3.5 h-3.5",style:{color:s.secondary}}),e.jsx("span",{className:"text-sm",style:{color:s.logo_text},children:_.map(S=>{const U=k.find(B=>B.id===S.chantierId);return S.libelleDestination||(U==null?void 0:U.designation)||"Destination non d√©finie"}).join(", ")})]}),e.jsxs("span",{className:"text-sm font-medium flex-shrink-0",style:{color:s.logo_text},children:[_.reduce((S,U)=>S+(Number.parseFloat(U.distanceKm)||0),0).toFixed(0)," km"]}),e.jsxs("span",{className:"text-sm font-medium flex-shrink-0",style:{color:s.primary},children:[Se," MAD"]})]}),(()=>{const S=_.flatMap(me=>me.depenses),U=S.filter(me=>me.cheminJustificatif),B=S.length;if(B===0)return null;const K=U.length===B,oe=U.length>0&&U.length<B;return e.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${K?"bg-green-100 text-green-800":oe?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:K?"Justifi√©":oe?`${U.length}/${B}`:"Non justifi√©"})})()]})]})}),e.jsx("div",{className:"hidden lg:block",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:s.primary}}),e.jsxs("span",{className:"font-medium",style:{color:s.logo_text},children:[_.length," d√©placement",_.length>1?"s":""]}),e.jsxs("span",{className:"text-sm px-2 py-1 rounded-full",style:{backgroundColor:s.secondary+"20",color:s.logo_text},children:[_.reduce((S,U)=>S+U.depenses.length,0)," d√©pense",_.reduce((S,U)=>S+U.depenses.length,0)>1?"s":""]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ke,{className:"w-4 h-4",style:{color:s.secondary}}),e.jsx("span",{className:"text-sm",style:{color:s.logo_text},children:_.map(S=>{const U=k.find(B=>B.id===S.chantierId);return S.libelleDestination||(U==null?void 0:U.designation)||"Destination non d√©finie"}).join(", ")})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("span",{className:"text-sm font-medium",style:{color:s.logo_text},children:[_.reduce((S,U)=>S+(Number.parseFloat(U.distanceKm)||0),0).toFixed(0)," km"]})}),e.jsx("div",{className:"flex items-center space-x-2",children:(()=>{const S=_.flatMap(me=>me.depenses),U=S.filter(me=>me.cheminJustificatif),B=S.length;if(B===0)return null;const K=U.length===B,oe=U.length>0&&U.length<B;return e.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${K?"bg-green-100 text-green-800":oe?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:K?"Justifi√©":oe?`${U.length}/${B} justifi√©${U.length>1?"s":""}`:"Non justifi√©"})})()})]})})]}):e.jsx("div",{className:"flex-1",children:e.jsx("span",{className:"text-xs sm:text-sm",style:{color:s.secondary},children:"Aucun d√©placement"})})]}),e.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2 md:space-x-4 flex-shrink-0",children:[Se>0&&e.jsxs("div",{className:"text-right hidden lg:block",children:[e.jsxs("div",{className:"font-bold text-lg",style:{color:s.primary},children:[Se.toFixed(2)," MAD"]}),e.jsx("div",{className:"text-xs",style:{color:s.secondary},children:"Total"})]}),e.jsx("button",{onClick:S=>{S.stopPropagation(),i||j(ne)},disabled:ue||i,className:"p-1.5 sm:p-2 rounded-lg transition-colors hover:bg-gray-100 disabled:opacity-50",style:{color:s.primary},title:ue?"Un d√©placement existe d√©j√† pour cette date":"Ajouter un d√©placement",children:e.jsx(ge,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})}),ue&&e.jsx("button",{onClick:S=>{S.stopPropagation(),T(se)},className:"p-1.5 sm:p-2 hover:bg-gray-100 rounded-lg transition-colors",style:{color:s.logo_text},children:Re?e.jsx(As,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}):e.jsx(He,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})})]})]})}),Re&&ue&&e.jsx("div",{className:"px-2 sm:px-3 md:px-4 pb-2 sm:pb-3 md:pb-4",style:{backgroundColor:s.secondary+"05"},children:e.jsx("div",{className:"space-y-3 sm:space-y-4",children:_.map(S=>{var U;return e.jsxs("div",{className:"bg-white rounded-lg border p-2 sm:p-3 md:p-4",style:{borderColor:s.secondary},children:[e.jsx(as,{createdBy:S.createdBy,modifiedBy:S.modifiedBy,currentUserId:De,allUsers:r}),e.jsxs("div",{className:"flex flex-col lg:flex-row lg:justify-between lg:items-start mb-3 sm:mb-4 space-y-3 lg:space-y-0",children:[e.jsxs("div",{className:"flex-1 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Chantier"}),e.jsxs("select",{value:S.chantierId!=null?String(S.chantierId):"",onChange:B=>{const K=B.target.value?parseInt(B.target.value):null;F(S.id,"chantierId",K),C(S.id,"chantierId",K)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"S√©lectionner un chantier"}),k.map(B=>{var K;return e.jsxs("option",{value:String(B.id),children:[B.codeChantier," - ",B.designation," (",B.ville,")",(K=B.typeDeDeplacement)!=null&&K.nom?` - ${B.typeDeDeplacement.nom}`:""]},B.id)})]})]}),(de==null?void 0:de.possede_voiture_personnelle)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-1 sm:mb-2",style:{color:s.logo_text},children:"Taux kilom√©trique (optionnel)"}),e.jsxs("select",{value:S.vehiculeRateRuleId||"",onChange:B=>{const K=B.target.value?parseInt(B.target.value):null;F(S.id,"vehiculeRateRuleId",K),C(S.id,"vehiculeRateRuleId",K)},className:"w-full px-2 sm:px-3 py-1.5 sm:py-2 border rounded-lg focus:outline-none focus:ring-2 text-xs sm:text-sm",style:{borderColor:s.secondary,"--tw-ring-color":s.primary},children:[e.jsx("option",{value:"",children:"Aucun"}),Array.isArray(D)&&D.map(B=>e.jsx("option",{value:B.id,children:B.name},B.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-1 sm:mb-2",style:{color:s.logo_text},children:"Distance (km)"}),e.jsx("input",{type:"number",step:"0.1",value:S.distanceKm??"",onChange:B=>F(S.id,"distanceKm",B.target.value),onBlur:B=>C(S.id,"distanceKm",B.target.value),className:"w-full px-2 sm:px-3 py-1.5 sm:py-2 border rounded-lg focus:outline-none focus:ring-2 text-xs sm:text-sm",style:{borderColor:s.secondary,"--tw-ring-color":s.primary}})]})]})]}),e.jsx("div",{className:"flex items-center space-x-2 lg:ml-4",children:e.jsx("button",{onClick:B=>{B.stopPropagation(),i||J(S.id)},disabled:i,className:"p-1.5 sm:p-2 text-red-600 hover:bg-red-50 rounded transition-colors disabled:opacity-50",children:e.jsx(fe,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})})})]}),e.jsxs("div",{className:"border-t pt-3 sm:pt-4",style:{borderColor:s.secondary},children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-3 sm:mb-4 space-y-2 sm:space-y-0",children:[e.jsxs("h4",{className:"text-sm sm:text-base font-medium",style:{color:s.logo_text},children:["D√©penses (",S.depenses.length,")"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:B=>{B.stopPropagation(),n(K=>({...K,[S.id]:!K[S.id]}))},className:"flex items-center justify-center space-x-2 px-3 py-1.5 sm:py-2 text-xs sm:text-sm rounded-lg font-medium border hover:bg-gray-50 transition-colors w-full sm:w-auto",style:{borderColor:s.secondary,color:s.logo_text},children:[e.jsx(ge,{className:"w-3 h-3"}),e.jsx("span",{children:"Nouveau type"})]}),e.jsxs("button",{onClick:B=>{B.stopPropagation(),i||h(S.id)},disabled:i,className:"flex items-center justify-center space-x-2 px-3 py-1.5 sm:py-2 text-xs sm:text-sm rounded-lg font-medium text-white hover:opacity-90 transition-opacity w-full sm:w-auto disabled:opacity-50",style:{backgroundColor:s.primary},children:[e.jsx(ge,{className:"w-3 h-3"}),e.jsx("span",{children:"Ajouter"})]})]})]}),b[S.id]&&e.jsx("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",value:le[S.id]||"",onChange:B=>Ne(K=>({...K,[S.id]:B.target.value})),placeholder:"Nom du nouveau type de d√©pense",className:"flex-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 text-sm",style:{borderColor:s.secondary,"--tw-ring-color":s.primary}}),e.jsx("button",{onClick:()=>ye(S.id),disabled:!((U=le[S.id])!=null&&U.trim()),className:"p-2 text-white rounded-lg hover:opacity-90 transition-opacity disabled:opacity-50",style:{backgroundColor:s.primary},children:e.jsx(Le,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>n(B=>({...B,[S.id]:!1})),className:"p-2 text-gray-600 hover:bg-gray-200 rounded-lg transition-colors",children:e.jsx(ve,{className:"w-4 h-4"})})]})}),S.depenses.length===0?e.jsx("p",{className:"text-xs sm:text-sm text-center py-3 sm:py-4",style:{color:s.secondary},children:"Aucune d√©pense"}):e.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[e.jsxs("div",{className:"hidden lg:grid underline lg:grid-cols-4 gap-2 sm:gap-3 p-2 sm:p-3 font-medium text-xs sm:text-sm",style:{color:s.logo_text},children:[e.jsx("div",{children:"Type"}),e.jsx("div",{children:"Montant"}),e.jsx("div",{children:"Justificatif"})]}),S.depenses.map(B=>e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-3 p-2 sm:p-3 rounded",style:{backgroundColor:s.secondary+"10"},children:[e.jsx("div",{className:"lg:col-span-4 mb-2",children:e.jsx(as,{createdBy:B.createdBy,modifiedBy:B.modifiedBy,currentUserId:De,allUsers:r})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-1 sm:hidden",style:{color:s.logo_text},children:"Type"}),e.jsx("select",{value:B.typeDepenseId,onChange:K=>{const oe=Number.parseInt(K.target.value);L(S.id,B.id,"typeDepenseId",oe),v(S.id,B.id,"typeDepenseId",oe)},className:"w-full px-2 sm:px-3 py-1.5 sm:py-2 border rounded focus:outline-none focus:ring-2 text-xs sm:text-sm",style:{borderColor:s.secondary,"--tw-ring-color":s.primary},children:a.map(K=>e.jsx("option",{value:K.id,children:K.nom},K.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-1 sm:hidden",style:{color:s.logo_text},children:"Montant"}),e.jsx("input",{type:"number",step:"0.01",value:B.montant,onChange:K=>L(S.id,B.id,"montant",K.target.value),onBlur:K=>v(S.id,B.id,"montant",K.target.value),className:"w-full px-2 sm:px-3 py-1.5 sm:py-2 border rounded focus:outline-none focus:ring-2 text-xs sm:text-sm",style:{borderColor:s.secondary,"--tw-ring-color":s.primary},placeholder:"Montant"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-1 sm:hidden",style:{color:s.logo_text},children:"Justificatif"}),e.jsxs("div",{className:"flex space-x-1 items-center",children:[e.jsx("div",{className:"relative flex-1 overflow-hidden",children:e.jsx("input",{type:"file",accept:"image/*,application/pdf",onChange:K=>{const oe=K.target.files[0];oe&&Y(S.id,B.id,oe)},className:"w-full px-2 sm:px-3 py-1.5 sm:py-2 border rounded focus:outline-none focus:ring-2 text-xs file:mr-2 file:py-1 file:px-2 file:border-0 file:text-xs file:bg-gray-100 file:rounded file:cursor-pointer",style:{borderColor:s.secondary,"--tw-ring-color":s.primary,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}})}),B.cheminJustificatif&&e.jsx("button",{onClick:()=>u(S.id,B.id),className:"p-1.5 sm:p-2 text-red-600 hover:bg-red-50 rounded transition-colors flex-shrink-0",title:"Supprimer le fichier",children:e.jsx(ve,{className:"w-3 h-3"})})]}),B.cheminJustificatif&&e.jsxs("div",{className:"text-xs text-green-600 mt-1",children:["‚úì ",B.cheminJustificatif]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{onClick:K=>{K.stopPropagation(),i||I(S.id,B.id)},disabled:i,className:"p-1.5 sm:p-2 text-red-600 hover:bg-red-50 rounded transition-colors disabled:opacity-50",children:e.jsx(fe,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})})})]},B.id))]}),e.jsx("div",{className:"text-right pt-2 border-t",style:{borderColor:s.secondary},children:e.jsxs("span",{className:"font-bold text-sm sm:text-base lg:text-lg",style:{color:s.primary},children:["Total: ",X(S).toFixed(2)," MAD"]})})]})]},S.id)})})})]},se)};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-3 md:px-6 py-2 sm:py-3 md:py-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center space-y-2 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl font-bold",style:{color:s.logo_text},children:"Gestion des D√©placements"}),e.jsx("p",{className:"text-xs sm:text-sm mt-1",style:{color:s.secondary},children:"Vue chronologique mensuelle"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:ae,className:"flex items-center cursor-pointer space-x-1 sm:space-x-2 px-2 sm:px-3 md:px-4 py-1.5 sm:py-2 border rounded-lg hover:bg-gray-50 transition-colors text-xs sm:text-sm",style:{borderColor:s.primary,color:s.primary},children:[e.jsx(Ns,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Exporter Excel"}),e.jsx("span",{className:"sm:hidden",children:"Excel"})]}),e.jsxs("button",{onClick:re,className:"flex items-center cursor-pointer space-x-1 sm:space-x-2 px-2 sm:px-3 md:px-4 py-1.5 sm:py-2 border rounded-lg hover:bg-gray-50 transition-colors text-xs sm:text-sm",style:{borderColor:s.primary,color:s.primary},children:[e.jsx(ws,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Exporter PDF"}),e.jsx("span",{className:"sm:hidden",children:"PDF"})]}),e.jsxs("button",{onClick:E,className:"flex items-center cursor-pointer space-x-1 sm:space-x-2 px-2 sm:px-3 md:px-4 py-1.5 sm:py-2 border rounded-lg hover:bg-gray-50 transition-colors text-xs sm:text-sm",style:{borderColor:s.primary,color:s.primary},children:[e.jsx(Cs,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Envoyer par Email"}),e.jsx("span",{className:"sm:hidden",children:"Email"})]})]})]})})}),e.jsx("div",{className:"bg-white border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-3 md:px-6 py-2 sm:py-3 md:py-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center space-y-2 sm:space-y-0",children:[e.jsxs("div",{className:"flex items-center justify-center sm:justify-start space-x-3 sm:space-x-4",children:[e.jsx("button",{onClick:w,className:"p-1.5 sm:p-2 hover:bg-gray-100 rounded-lg transition-colors",style:{color:s.logo_text},children:e.jsx(is,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>l(!x),className:"flex items-center space-x-1 text-base sm:text-lg md:text-xl font-bold hover:bg-gray-100 px-2 py-1 rounded-lg transition-colors",style:{color:s.logo_text},children:[e.jsx("span",{children:new Date(m,p).toLocaleDateString("fr-FR",{month:"long",year:"numeric"})}),e.jsx(cs,{className:"w-4 h-4 sm:w-5 sm:h-5 opacity-70"})]}),x&&e.jsx("div",{className:"absolute z-10 mt-1 bg-white rounded-lg shadow-lg border border-gray-200 p-3 w-64 sm:w-72",children:e.jsx("div",{className:"grid grid-cols-1 gap-2",children:we.map(se=>e.jsxs("div",{className:"mb-2",children:[e.jsx("h3",{className:"text-sm font-semibold mb-1 px-2",style:{color:s.logo_text},children:se}),e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-1",children:ie.map((ne,_)=>e.jsx("button",{onClick:()=>y(se,_),className:`text-xs p-1.5 rounded-md hover:bg-gray-100 transition-colors ${se===m&&_===p?"bg-blue-100 text-blue-800 font-medium":"text-gray-700"}`,children:ne.substring(0,3)},`${se}-${_}`))})]},se))})})]}),e.jsx("button",{onClick:d,className:"p-1.5 sm:p-2 hover:bg-gray-100 rounded-lg transition-colors",style:{color:s.logo_text},children:e.jsx(ds,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),e.jsx("button",{onClick:f,className:"px-2 sm:px-3 py-1 text-xs sm:text-sm border rounded-lg hover:bg-gray-50 transition-colors",style:{borderColor:s.secondary,color:s.logo_text},children:"Aujourd'hui"})]}),e.jsxs("div",{className:"flex items-center justify-center sm:justify-end space-x-3 sm:space-x-4 md:space-x-6",children:[e.jsxs("div",{className:"text-xs sm:text-sm",style:{color:s.logo_text},children:[e.jsx("span",{className:"font-medium",children:$().length})," d√©placement",$().length>1?"s":""]}),e.jsxs("div",{className:"text-xs sm:text-sm",style:{color:s.logo_text},children:[e.jsx("span",{className:"font-medium",children:q()})," d√©pense",q()>1?"s":""]}),e.jsxs("div",{className:"text-xs sm:text-sm",style:{color:s.logo_text},children:[e.jsx("span",{className:"font-medium",children:A().toFixed(1)})," km"]}),e.jsxs("div",{className:"text-sm sm:text-base md:text-lg font-bold",style:{color:s.primary},children:[R().toFixed(2)," MAD"]})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-2 sm:px-3 md:px-6 py-3 sm:py-4 md:py-8",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:e.jsx("div",{className:"divide-y",style:{borderColor:s.secondary},children:Array.from({length:Z()},(se,ne)=>ne+1).map(se=>be(se))})}),e.jsx("div",{className:"mt-3 sm:mt-4 md:mt-6 bg-white rounded-lg shadow-sm border p-2 sm:p-3 md:p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-2 sm:space-y-0",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 md:gap-6",children:[e.jsxs("div",{className:"flex items-center space-x-1.5 sm:space-x-2",children:[e.jsx("div",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-full",style:{backgroundColor:s.primary}}),e.jsx("span",{className:"text-xs sm:text-sm",style:{color:s.logo_text},children:"Jour avec d√©placements"})]}),e.jsxs("div",{className:"flex items-center space-x-1.5 sm:space-x-2",children:[e.jsx("div",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-full border-2 border-blue-500"}),e.jsx("span",{className:"text-xs sm:text-sm",style:{color:s.logo_text},children:"Aujourd'hui"})]}),e.jsxs("div",{className:"flex items-center space-x-1.5 sm:space-x-2",children:[e.jsx(He,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4",style:{color:s.secondary}}),e.jsx("span",{className:"text-xs sm:text-sm",style:{color:s.logo_text},children:"Cliquer pour d√©velopper"})]})]}),e.jsx("div",{className:"text-xs sm:text-sm text-center sm:text-right",style:{color:s.secondary},children:"Utilisez + pour ajouter un d√©placement"})]})})]})]})};function ls({currentUserId:a}){const o=ks(),x=a||parseInt(o.userId),b=$s(x);return e.jsx(_s,{...b})}function et({activeTab:a,setActiveTab:o}){const x=[{id:"accounts",label:"Comptes",icon:"üë•"},{id:"role",label:"R√¥les",icon:"üè∑Ô∏è"},{id:"expenses",label:"D√©penses",icon:"üí∞"},{id:"travel",label:"D√©placements",icon:"‚úàÔ∏è"},{id:"chantier",label:"Chantiers",icon:"üèóÔ∏è"},{id:"travelrates",label:"Taux D√©placement",icon:"üß≥"},{id:"carrates",label:"Taux V√©hicule",icon:"üöò"},{id:"manager",label:"Consulter",icon:"üóÇÔ∏è"}];return e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded shadow-sm border border-gray-100 p-2",children:e.jsx("nav",{className:"flex flex-wrap gap-1",children:x.map(b=>e.jsxs("button",{onClick:()=>o(b.id),className:`flex items-center gap-2 px-4 py-3 text-sm font-medium rounded transition-all duration-200 ${a===b.id?"bg-[#a52148] text-white shadow-lg shadow-[#a52148]/25 scale-105":"text-[#585e5c] hover:bg-gray-50 hover:text-[#a52148]"}`,children:[e.jsx("span",{className:"text-base",children:b.icon}),e.jsx("span",{className:"hidden sm:inline",children:b.label})]},b.id))})})}function Pe(){const[a,o]=c.useState([]),[x,b]=c.useState(!0),[m,p]=c.useState([]),[i,D]=c.useState({}),[k,r]=c.useState(""),[l,n]=c.useState(null),[w,d]=c.useState(null),f={error:t=>console.log("Error:",t),success:t=>console.log("Success:",t)},y=c.useCallback(async()=>{var t;try{b(!0);const v=await P.get("/users");o(v.data)}catch(v){console.error("Fetch accounts error:",v),((t=v.response)==null?void 0:t.status)===401?f.error("Session expir√©e. Redirection vers la connexion..."):f.error("√âchec du chargement des comptes")}finally{b(!1)}},[]);c.useEffect(()=>{y()},[y]),c.useEffect(()=>{async function t(){try{const L=(await P.get("/users/roles")).data.map(Y=>({id:Y.id,name:Y.nom.toUpperCase()}));p(L)}catch(v){f.error("Impossible de charger la liste des r√¥les"),console.error(v)}}t()},[]);const T=c.useMemo(()=>a.filter(t=>{const v=k.toLowerCase(),L=k===""||t.name.toLowerCase().includes(v)||t.email.toLowerCase().includes(v)||t.cnie&&t.cnie.toLowerCase().includes(v)||t.role&&t.role.toLowerCase().includes(v),Y=l===null||t.hasCar===l,u=w===null||w===!0&&t.status==="Actif"||w===!1&&t.status!=="Actif";return L&&Y&&u}),[a,k,l,w]),E=async(t,v,L)=>{var u,I,X;const Y=!L;try{await P.patch(`/users/${t}`,{field:v,value:Y}),o(O=>O.map($=>$.id===t?{...$,...v==="estActif"?{status:Y?"Actif":"Inactif"}:{hasCar:Y}}:$)),f.success("Mise √† jour r√©ussie")}catch(O){if(console.error("Toggle field error:",O),((u=O.response)==null?void 0:u.status)===401)f.error("Session expir√©e. Redirection vers la connexion...");else{const $=((X=(I=O==null?void 0:O.response)==null?void 0:I.data)==null?void 0:X.error)||"Erreur de mise √† jour";f.error($)}}},j=async(t,v)=>{var L,Y;try{await P.patch(`/users/${t}`,{field:"cartNational",value:v}),o(u=>u.map(I=>I.id===t?{...I,cnie:v}:I)),D(u=>({...u,[t]:!1})),f.success("CNIE mise √† jour")}catch(u){console.error("Update CNIE error:",u),f.error(((Y=(L=u==null?void 0:u.response)==null?void 0:L.data)==null?void 0:Y.error)||"Erreur lors de la mise √† jour du CNIE")}},C=async(t,v)=>{var L,Y;try{await P.patch(`/users/${t}/role`,{roleId:v});const u=m.find(I=>I.id===v);o(I=>I.map(X=>X.id===t?{...X,role:u?u.name.toLowerCase():X.role,roleId:v}:X)),f.success("R√¥le mis √† jour avec succ√®s")}catch(u){console.error("Update role error:",u),f.error(((Y=(L=u.response)==null?void 0:L.data)==null?void 0:Y.error)||"Erreur lors de la mise √† jour du r√¥le")}},F=t=>{const v=m.find(L=>L.name===t);return v?v.id:null},J=(t,v)=>{const L=F(v);if(!L)return f.error("R√¥le invalide s√©lectionn√©");C(t,L)},h=()=>{r(""),n(null),d(null)};return x?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-4 rounded-full animate-spin",style:{borderTopColor:s.primary}}),e.jsx("div",{className:"text-lg font-medium",style:{color:s.logo_text},children:"Chargement des comptes..."})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-4 md:p-6 lg:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-4 sm:p-6 md:p-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6",children:[e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-2xl flex items-center justify-center shadow-lg",style:{background:`linear-gradient(135deg, ${s.primary}, #8a1c3c)`},children:e.jsx(Me,{className:"w-6 h-6 sm:w-8 sm:h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl lg:text-4xl font-bold",style:{color:s.logo_text},children:"Gestion des Comptes"}),e.jsx("p",{className:"text-gray-600 mt-1 sm:mt-2 text-sm sm:text-base md:text-lg",children:"Administration et validation des utilisateurs"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row flex-wrap items-start sm:items-center gap-3 sm:gap-4",children:[e.jsxs("div",{className:"px-4 py-2 sm:px-6 sm:py-3 rounded-xl font-semibold text-white shadow-lg text-sm sm:text-base",style:{backgroundColor:s.primary},children:[e.jsx("span",{className:"text-lg sm:text-2xl font-bold",children:T.length}),e.jsx("span",{className:"ml-1 sm:ml-2 text-xs sm:text-sm opacity-90",children:"R√©sultats"})]}),e.jsxs("div",{className:"px-4 py-2 sm:px-6 sm:py-3 rounded-xl font-medium border-2 text-sm sm:text-base",style:{borderColor:s.secondary,color:s.logo_text},children:[e.jsx("span",{className:"text-xs sm:text-sm",children:"Total Actifs"}),e.jsx("span",{className:"ml-1 sm:ml-2 font-bold",children:T.filter(t=>t.status==="Actif").length})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 lg:p-6 space-y-5",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Te,{className:"h-4 w-4 text-gray-400"})}),e.jsx("input",{type:"text",placeholder:"Rechercher par nom, email, CNIE ou r√¥le...",value:k,onChange:t=>r(t.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm transition-all"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700 font-medium",children:[e.jsx(Je,{className:"w-4 h-4"}),e.jsx("span",{children:"Filtres"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"grid grid-cols-3 rounded-lg border border-gray-300 overflow-hidden",children:[e.jsx("button",{onClick:()=>n(null),className:`px-3 py-2 text-sm font-medium transition-all ${l===null?"bg-[#a52148] text-white":"text-gray-600 hover:bg-gray-50"}`,children:"Tous"}),e.jsxs("button",{onClick:()=>n(!0),className:`px-3 py-2 text-sm text-nowrap font-medium transition-all border-l border-gray-300 ${l===!0?"bg-green-500 text-white":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"hidden md:inline",children:"Avec v√©hicule"}),e.jsx("span",{className:"md:hidden",children:"Avec"})]}),e.jsxs("button",{onClick:()=>n(!1),className:`px-3 py-2 text-sm text-nowrap font-medium transition-all border-l border-gray-300 ${l===!1?"bg-gray-500 text-white":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"hidden md:inline",children:"Sans v√©hicule"}),e.jsx("span",{className:"md:hidden",children:"Sans"})]})]})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"grid grid-cols-3 rounded-lg border border-gray-300 overflow-hidden",children:[e.jsx("button",{onClick:()=>d(null),className:`px-3 py-2 text-sm font-medium transition-all ${w===null?"bg-[#a52148]  text-white":"text-gray-600 hover:bg-gray-50"}`,children:"Tous"}),e.jsx("button",{onClick:()=>d(!0),className:`px-3 py-2 text-sm font-medium transition-all border-l border-gray-300 ${w===!0?"bg-green-500 text-white":"text-gray-600 hover:bg-gray-50"}`,children:"Actifs"}),e.jsx("button",{onClick:()=>d(!1),className:`px-3 py-2 text-sm font-medium transition-all border-l border-gray-300 ${w===!1?"bg-yellow-500 text-white":"text-gray-600 hover:bg-gray-50"}`,children:"Inactifs"})]})}),(k||l!==null||w!==null)&&e.jsx("button",{onClick:h,className:"sm:w-auto w-full px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-all border border-gray-300",children:"Effacer tout"})]})]}),(k||l!==null||w!==null)&&e.jsx("div",{className:"sm:hidden border-t border-gray-100 pt-3",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[k&&e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium bg-blue-50 text-blue-700 border border-blue-200",children:['"',k.length>12?k.substring(0,12)+"...":k,'"',e.jsx("button",{onClick:()=>r(""),className:"hover:text-blue-800",children:e.jsx(ve,{className:"w-3 h-3"})})]}),l!==null&&e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium bg-green-50 text-green-700 border border-green-200",children:[l?"Avec v√©hicule":"Sans v√©hicule",e.jsx("button",{onClick:()=>n(null),className:"hover:text-green-800",children:e.jsx(ve,{className:"w-3 h-3"})})]}),w!==null&&e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium bg-yellow-50 text-yellow-700 border border-yellow-200",children:[w?"Actifs":"Inactifs",e.jsx("button",{onClick:()=>d(null),className:"hover:text-yellow-800",children:e.jsx(ve,{className:"w-3 h-3"})})]})]})})]}),T.length===0&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-gray-100 flex items-center justify-center",children:e.jsx(Te,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Aucun r√©sultat trouv√©"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Aucun compte ne correspond √† vos crit√®res de recherche."}),e.jsx("button",{onClick:h,className:"px-6 py-2 rounded-lg font-medium text-white hover:opacity-90 transition-opacity",style:{backgroundColor:s.primary},children:"Effacer les filtres"})]}),T.length>0&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"hidden lg:block bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"px-8 py-6 border-b border-gray-100",style:{backgroundColor:`${s.primary}05`},children:e.jsxs("div",{className:"grid grid-cols-12 gap-6 text-sm font-semibold text-gray-700 uppercase tracking-wider",children:[e.jsx("div",{className:"col-span-4",children:"Utilisateur"}),e.jsx("div",{className:"col-span-2",children:"CNIE"}),e.jsx("div",{className:"col-span-2",children:"V√©hicule"}),e.jsx("div",{className:"col-span-2",children:"Statut"}),e.jsx("div",{className:"col-span-2",children:"R√¥le"})]})}),e.jsx("div",{className:"divide-y divide-gray-100",children:T.map(t=>{var v;return e.jsx("div",{className:"px-8 py-6 hover:bg-gray-50 transition-all duration-200 group",children:e.jsxs("div",{className:"grid grid-cols-12 gap-6 items-center",children:[e.jsxs("div",{className:"col-span-4 flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl flex items-center justify-center text-white font-bold text-lg shadow-lg",style:{background:`linear-gradient(135deg, ${s.primary}, #8a1c3c)`},children:t.avatar}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 rounded-full border-2 border-white shadow-sm",style:{backgroundColor:t.status==="Actif"?"#10b981":"#f59e0b"}})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-lg",style:{color:s.logo_text},children:t.name}),e.jsx("div",{className:"text-gray-500 text-sm",children:t.email})]})]}),e.jsx("div",{className:"col-span-2",children:i[t.id]?e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("input",{type:"text",defaultValue:t.cnie||"",onBlur:L=>j(t.id,L.target.value),autoFocus:!0,className:"border-2 border-gray-200 rounded-xl px-3 py-2 text-sm w-full focus:outline-none focus:border-opacity-50",style:{focusBorderColor:s.primary}})}):e.jsxs("div",{onClick:()=>D(L=>({...L,[t.id]:!0})),className:"flex items-center gap-2 px-3 py-2 rounded-xl cursor-pointer hover:bg-gray-100 transition-colors group/cnie",children:[e.jsx("span",{className:"font-medium",style:{color:s.primary},children:t.cnie||"Non d√©fini"}),e.jsx(Ze,{className:"w-4 h-4 text-gray-400 group-hover/cnie:text-gray-600"})]})}),e.jsx("div",{className:"col-span-2",children:e.jsxs("button",{onClick:()=>E(t.id,"possedeVoiturePersonnelle",t.hasCar),className:`flex items-center gap-3 px-4 py-3 rounded-xl font-semibold text-sm transition-all duration-200 hover:scale-105 shadow-md ${t.hasCar?"bg-green-500 text-white hover:bg-green-600":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(Ye,{className:"w-4 h-4"}),t.hasCar?"Poss√®de":"Aucun"]})}),e.jsx("div",{className:"col-span-2",children:e.jsxs("button",{onClick:()=>E(t.id,"estActif",t.status==="Actif"),className:`flex items-center gap-3 px-4 py-3 rounded-xl font-semibold text-sm transition-all duration-200 hover:scale-105 shadow-md ${t.status==="Actif"?"bg-green-500 text-white hover:bg-green-600":"bg-yellow-500 text-white hover:bg-yellow-600"}`,children:[t.status==="Actif"?e.jsx(Le,{className:"w-4 h-4"}):e.jsx(ve,{className:"w-4 h-4"}),t.status]})}),e.jsx("div",{className:"col-span-2",children:e.jsx("select",{value:((v=t.role)==null?void 0:v.toUpperCase())||"",onChange:L=>J(t.id,L.target.value),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 font-medium text-sm focus:outline-none focus:border-opacity-50 bg-white shadow-sm hover:border-gray-300 transition-colors",style:{focusBorderColor:s.primary},children:m.map(L=>e.jsx("option",{value:L.name,children:L.name},L.id))})})]})},t.id)})})]}),e.jsx("div",{className:"lg:hidden space-y-3",children:T.map(t=>{var v;return e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-lg",style:{background:`linear-gradient(135deg, ${s.primary}, #8a1c3c)`},children:t.avatar}),e.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-4 h-4 rounded-full border-2 border-white shadow-sm",style:{backgroundColor:t.status==="Actif"?"#10b981":"#f59e0b"}})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-bold text-lg truncate",style:{color:s.logo_text},children:t.name}),e.jsx("div",{className:"text-gray-500 text-sm truncate",children:t.email})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"CNIE"}),i[t.id]?e.jsx("input",{type:"text",defaultValue:t.cnie||"",onBlur:L=>j(t.id,L.target.value),autoFocus:!0,className:"w-full border-2 border-gray-200 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-opacity-50",style:{focusBorderColor:s.primary}}):e.jsxs("div",{onClick:()=>D(L=>({...L,[t.id]:!0})),className:"flex items-center gap-2 px-3 py-2 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors border border-gray-200",children:[e.jsx("span",{className:"font-medium flex-1 text-sm truncate",style:{color:s.primary},children:t.cnie||"Non d√©fini"}),e.jsx(Ze,{className:"w-3 h-3 text-gray-400 flex-shrink-0"})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"R√¥le"}),e.jsx("select",{value:((v=t.role)==null?void 0:v.toUpperCase())||"",onChange:L=>J(t.id,L.target.value),className:"w-full px-3 py-2 rounded-lg border-2 border-gray-200 font-medium text-sm focus:outline-none focus:border-opacity-50 bg-white",style:{focusBorderColor:s.primary},children:m.map(L=>e.jsx("option",{value:L.name,children:L.name},L.id))})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("button",{onClick:()=>E(t.id,"possedeVoiturePersonnelle",t.hasCar),className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all duration-200 hover:scale-105 shadow-sm ${t.hasCar?"bg-green-500 text-white hover:bg-green-600":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(Ye,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:t.hasCar?"V√©hicule":"Aucun v√©hicule"})]}),e.jsxs("button",{onClick:()=>E(t.id,"estActif",t.status==="Actif"),className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all duration-200 hover:scale-105 shadow-sm ${t.status==="Actif"?"bg-green-500 text-white hover:bg-green-600":"bg-yellow-500 text-white hover:bg-yellow-600"}`,children:[t.status==="Actif"?e.jsx(Le,{className:"w-4 h-4 flex-shrink-0"}):e.jsx(ve,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:t.status})]})]})]},t.id)})})]})]})})}function Ee({open:a,title:o,message:x,onConfirm:b,onCancel:m}){return a?e.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-40 flex items-center justify-center px-4",children:e.jsxs("div",{className:"bg-white rounded shadow-lg w-full max-w-sm p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:o}),e.jsx("p",{className:"text-sm text-gray-600",children:x}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{onClick:m,className:"px-4 py-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-md",children:"Annuler"}),e.jsx("button",{onClick:b,className:"px-4 py-2 bg-[#a52148] text-white hover:bg-[#8a1c3c] rounded-md",children:"Confirmer"})]})]})}):null}function ps(){const[a,o]=c.useState([]),[x,b]=c.useState(!1),[m,p]=c.useState({nom:"",description:""}),[i,D]=c.useState(null),[k,r]=c.useState({type:"",text:""}),[l,n]=c.useState(!1),[w,d]=c.useState(null),[f,y]=c.useState(!0),T=async()=>{var h;try{y(!0);const t=await P.get("/expense-types");o(t.data)}catch(t){console.error("Fetch expense types error:",t),((h=t.response)==null?void 0:h.status)===401||r({type:"error",text:"√âchec du chargement des types."})}finally{y(!1)}};c.useEffect(()=>{T()},[]);const E=async h=>{var t,v,L;h.preventDefault();try{const Y=a.find(u=>u.nom.toLowerCase()===m.nom.toLowerCase());if(!i&&Y){r({type:"error",text:"Ce nom existe d√©j√†."});return}i?(await P.put(`/expense-types/${i}`,m),r({type:"success",text:"Type modifi√© avec succ√®s."})):(await P.post("/expense-types",m),r({type:"success",text:"Type ajout√© avec succ√®s."})),p({nom:"",description:""}),b(!1),D(null),T()}catch(Y){if(console.error("Error saving expense type:",Y),((t=Y.response)==null?void 0:t.status)!==401){const u=((L=(v=Y==null?void 0:Y.response)==null?void 0:v.data)==null?void 0:L.error)||"Erreur lors de l'enregistrement.";r({type:"error",text:u})}}},j=h=>{d(h),n(!0)},C=async()=>{var h;try{await P.delete(`/expense-types/${w}`),r({type:"success",text:"Type supprim√© avec succ√®s."}),T()}catch(t){console.error("Delete expense type error:",t),((h=t.response)==null?void 0:h.status)===401||r({type:"error",text:"Erreur lors de la suppression."})}finally{n(!1),d(null)}},F=h=>{p({nom:h.nom,description:h.description}),D(h.id),b(!0)},J=()=>{p({nom:"",description:""}),D(null),b(!1)};return f?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"text-gray-500",children:"Chargement des types de d√©penses..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-[#585e5c]",children:"Types de d√©penses"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Configurez les cat√©gories de d√©penses"})]}),e.jsx("button",{onClick:()=>{b(!x),D(null),p({nom:"",description:""})},className:"bg-[#a52148] cursor-pointer text-white px-6 py-3 rounded font-medium hover:bg-[#8a1c3c] transition-colors shadow-lg shadow-[#a52148]/25",children:x?"Fermer":"+ Nouveau type"})]}),e.jsx(Oe,{message:k.text,messageType:k.type,onClear:()=>r({type:"",text:""})}),x&&e.jsxs("form",{onSubmit:E,className:"bg-white p-6 rounded shadow space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nom"}),e.jsx("input",{required:!0,type:"text",value:m.nom,onChange:h=>p({...m,nom:h.target.value}),className:"mt-1 block w-full border border-gray-300 rounded p-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description (Optionnel)"}),e.jsx("textarea",{value:m.description,onChange:h=>p({...m,description:h.target.value}),className:"mt-1 block w-full border border-gray-300 rounded p-2"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",className:"bg-[#a52148] text-white px-6 py-2 rounded hover:bg-[#8a1c3c]",children:i?"Mettre √† jour":"Ajouter"}),i&&e.jsx("button",{type:"button",onClick:J,className:"text-gray-600 hover:underline",children:"Annuler"})]})]}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:a.map(h=>e.jsxs("div",{className:"bg-white rounded shadow-sm border border-gray-100 p-6 hover:shadow-md transition-shadow",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:h.nom}),e.jsx("p",{className:"text-gray-600 mb-6 text-sm leading-relaxed",children:h.description}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>F(h),className:"flex-1 bg-[#a52148] cursor-pointer text-white py-2 px-4 rounded text-sm font-medium hover:bg-[#8a1c3c] transition-colors",children:"Modifier"}),e.jsx("button",{onClick:()=>j(h.id),className:"px-4 py-2 cursor-pointer text-gray-600 hover:text-red-600 hover:bg-red-50 rounded transition-colors",children:"üóëÔ∏è"})]})]},h.id))}),l&&e.jsx(Ee,{open:l,title:"Supprimer le type ?",message:"√ätes-vous s√ªr de vouloir supprimer ce type de d√©pense ? Cette action est irr√©versible.",onConfirm:C,onCancel:()=>n(!1)})]})}function hs(){const[a,o]=c.useState([]),[x,b]=c.useState(!1),[m,p]=c.useState({nom:"",description:""}),[i,D]=c.useState(null),[k,r]=c.useState({type:"",text:""}),[l,n]=c.useState(!1),[w,d]=c.useState(null),[f,y]=c.useState(!0),T=async()=>{var h;try{y(!0);const t=await P.get("/travel-types");o(t.data)}catch(t){console.error("Fetch travel types error:",t),((h=t.response)==null?void 0:h.status)===401||r({type:"error",text:"√âchec du chargement des types."})}finally{y(!1)}};c.useEffect(()=>{T()},[]);const E=async h=>{var t,v,L;h.preventDefault();try{const Y=a.find(u=>u.nom.toLowerCase()===m.nom.toLowerCase());if(!i&&Y){r({type:"error",text:"Ce nom existe d√©j√†."});return}i?(await P.put(`/travel-types/${i}`,m),r({type:"success",text:"Type modifi√© avec succ√®s."})):(await P.post("/travel-types",m),r({type:"success",text:"Type ajout√© avec succ√®s."})),p({nom:"",description:""}),b(!1),D(null),T()}catch(Y){if(console.error("Error saving travel type:",Y),((t=Y.response)==null?void 0:t.status)!==401){const u=((L=(v=Y==null?void 0:Y.response)==null?void 0:v.data)==null?void 0:L.error)||"Erreur lors de l'enregistrement.";r({type:"error",text:u})}}},j=h=>{d(h),n(!0)},C=async()=>{var h;try{await P.delete(`/travel-types/${w}`),r({type:"success",text:"Type supprim√© avec succ√®s."}),T()}catch(t){console.error("Delete travel type error:",t),((h=t.response)==null?void 0:h.status)===401||r({type:"error",text:"Erreur lors de la suppression."})}finally{n(!1),d(null)}},F=h=>{p({nom:h.nom,description:h.description}),D(h.id),b(!0)},J=()=>{p({nom:"",description:""}),D(null),b(!1)};return f?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"text-gray-500",children:"Chargement des types de voyage..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-[#585e5c]",children:"Types de d√©placements"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"G√©rez les modes de transport"})]}),e.jsx("button",{onClick:()=>{b(!x),D(null),p({nom:"",description:""})},className:"bg-[#a52148] cursor-pointer text-white px-6 py-3 rounded font-medium hover:bg-[#8a1c3c] transition-colors shadow-lg shadow-[#a52148]/25",children:x?"Fermer":"+ Nouveau type"})]}),e.jsx(Oe,{message:k.text,messageType:k.type,onClear:()=>r({type:"",text:""})}),x&&e.jsxs("form",{onSubmit:E,className:"bg-white p-6 rounded shadow space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nom"}),e.jsx("input",{required:!0,type:"text",value:m.nom,onChange:h=>p({...m,nom:h.target.value}),className:"mt-1 block w-full border border-gray-300 rounded p-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description (Optionnel)"}),e.jsx("textarea",{value:m.description,onChange:h=>p({...m,description:h.target.value}),className:"mt-1 block w-full border border-gray-300 rounded p-2"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",className:"bg-[#a52148] text-white px-6 py-2 rounded hover:bg-[#8a1c3c]",children:i?"Mettre √† jour":"Ajouter"}),i&&e.jsx("button",{type:"button",onClick:J,className:"text-gray-600 hover:underline",children:"Annuler"})]})]}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:a.map(h=>e.jsxs("div",{className:"bg-white rounded shadow-sm border border-gray-100 p-6 hover:shadow-md transition-shadow",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:h.nom}),e.jsx("p",{className:"text-gray-600 mb-6 text-sm leading-relaxed",children:h.description}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>F(h),className:"flex-1 bg-[#a52148] cursor-pointer text-white py-2 px-4 rounded text-sm font-medium hover:bg-[#8a1c3c] transition-colors",children:"Modifier"}),e.jsx("button",{onClick:()=>j(h.id),className:"px-4 py-2 cursor-pointer text-gray-600 hover:text-red-600 hover:bg-red-50 rounded transition-colors",children:"üóëÔ∏è"})]})]},h.id))}),e.jsx(Ee,{open:l,title:"Supprimer le type ?",message:"√ätes-vous s√ªr de vouloir supprimer ce type de d√©placement ? Cette action est irr√©versible.",onConfirm:C,onCancel:()=>n(!1)})]})}function st(){const[a,o]=c.useState({}),[x,b]=c.useState(!0);c.useEffect(()=>{(async()=>{try{b(!0);const l=await P.get("/mission-rates"),n={};l.data.forEach(w=>{const d=w.user.nomComplete;n[d]||(n[d]=[]),n[d].push(w)}),o(n)}catch(l){console.error("Failed to fetch mission rates:",l)}finally{b(!1)}})()},[]);const m=async(r,l)=>{try{const n=await P.patch(`/mission-rates/${r}/status`,{statut:l});o(w=>{const d={};for(const f in w)d[f]=w[f].map(y=>y.id===r?n.data:y);return d})}catch(n){console.error("Failed to update rate status:",n)}};if(x)return e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"text-gray-500",children:"Chargement des taux de mission..."})});const p=Object.values(a).flat();if(p.length===0)return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-[#585e5c]",children:"Taux de mission"}),e.jsx("div",{className:"text-center p-8",children:e.jsx("p",{className:"text-gray-500",children:"Aucun taux de mission trouv√©"})})]});const i=p.filter(r=>r.statut==="en_attente").length,D=p.filter(r=>r.statut==="approuv√©").length,k=p.filter(r=>r.statut==="rejet√©").length;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-[#585e5c]",children:"Taux de mission"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Revue et gestion des taux de mission"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm font-medium",children:[i," en attente"]}),e.jsxs("div",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium",children:[D," approuv√©"]}),e.jsxs("div",{className:"bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-medium",children:[k," rejet√©"]})]})]}),Object.entries(a).map(([r,l])=>e.jsxs("div",{className:"space-y-4 pb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-[#a52148]",children:r}),l.map(n=>{const w=r.split(" ").map(j=>j[0]).join("").toUpperCase(),d=new Date(n.dateCreation).toLocaleDateString("fr-FR");let f,y,T,E;return n.statut==="approuv√©"?(f="bg-green-100",y="text-green-800",T="bg-green-500",E="Approuv√©"):n.statut==="rejet√©"?(f="bg-red-100",y="text-red-800",T="bg-red-500",E="Rejet√©"):(f="bg-yellow-100",y="text-yellow-800",T="bg-yellow-500",E="En attente"),e.jsx("div",{className:"bg-white rounded shadow-sm border border-gray-100 p-6 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-[#a52148] to-[#8a1c3c] rounded-full flex items-center justify-center text-white font-semibold",children:w}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:n.typeDeDeplacement.nom}),n.typeDeDeplacement.description&&e.jsx("p",{className:"text-sm text-gray-500",children:n.typeDeDeplacement.description})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4 lg:gap-8",children:[e.jsxs("div",{className:"text-2xl font-bold text-[#a52148]",children:[parseFloat(n.tarifParJour).toFixed(2)," MAD"]}),e.jsxs("div",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${f} ${y}`,children:[e.jsx("div",{className:`w-2 h-2 rounded-full mr-2 ${T}`}),E]}),e.jsx("div",{className:"text-sm text-gray-500",children:d}),e.jsx("div",{className:"flex gap-2",children:n.statut==="en_attente"?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>m(n.id,"approuv√©"),className:"bg-[#a52148] cursor-pointer text-white px-4 py-2 rounded text-sm font-medium hover:bg-[#8a1c3c] transition-colors",children:"Approuver"}),e.jsx("button",{onClick:()=>m(n.id,"rejet√©"),className:"bg-gray-100 cursor-pointer text-gray-700 px-4 py-2 rounded text-sm font-medium hover:bg-gray-200 transition-colors",children:"Rejeter"})]}):e.jsx("button",{onClick:()=>m(n.id,"en_attente"),className:"bg-[#a52148] cursor-pointer text-white px-4 py-2 rounded text-sm font-medium hover:bg-[#8a1c3c] transition-colors",children:"R√©voquer"})})]})]})},n.id)})]},r))]})}function tt(){const[a,o]=c.useState([]),[x,b]=c.useState(!0);c.useEffect(()=>{(async()=>{try{b(!0);const l=await P.get("/car-loan-rates");o(l.data)}catch(l){console.error("Failed to fetch car-loan rates:",l)}finally{b(!1)}})()},[]);const m=async(r,l)=>{try{const n=await P.patch(`/car-loan-rates/${r}/status`,{statut:l});o(w=>w.map(d=>d.id===r?n.data:d))}catch(n){console.error("Failed to update car-loan rate status:",n)}};if(x)return e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"text-gray-500",children:"Chargement des taux kilom√©triques..."})});if(a.length===0)return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-[#585e5c]",children:"Taux kilom√©triques"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"G√©rez les remboursements v√©hicules"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm font-medium",children:"0 en attente"}),e.jsx("div",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium",children:"0 approuv√©"}),e.jsx("div",{className:"bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-medium",children:"0 rejet√©"})]})]}),e.jsx("div",{className:"text-center p-8",children:e.jsx("p",{className:"text-gray-500",children:"Aucun taux kilom√©trique trouv√©"})})]});const p=a.filter(r=>r.statut==="en_attente").length,i=a.filter(r=>r.statut==="approuv√©").length,D=a.filter(r=>r.statut==="rejet√©").length,k=a.reduce((r,l)=>{const n=l.user.nomComplete;return r[n]||(r[n]=[]),r[n].push(l),r},{});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-[#585e5c]",children:"Taux kilom√©triques"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"G√©rez les remboursements v√©hicules"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm font-medium",children:[p," en attente"]}),e.jsxs("div",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium",children:[i," approuv√©"]}),e.jsxs("div",{className:"bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-medium",children:[D," rejet√©"]})]})]}),e.jsx("div",{className:"space-y-8",children:Object.entries(k).map(([r,l])=>e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-[#a52148]",children:r}),e.jsx("div",{className:"space-y-4",children:l.map(n=>{const w=r.split(" ").map(F=>F[0]).join("").toUpperCase(),d=new Date(n.dateCreation).toLocaleDateString("fr-FR"),f=n.libelle,y=parseFloat(n.tarifParKm).toFixed(3);let T,E,j,C;return n.statut==="approuv√©"?(T="bg-green-100",E="text-green-800",j="bg-green-500",C="Approuv√©"):n.statut==="rejet√©"?(T="bg-red-100",E="text-red-800",j="bg-red-500",C="Rejet√©"):(T="bg-yellow-100",E="text-yellow-800",j="bg-yellow-500",C="En attente"),e.jsx("div",{className:"bg-white rounded shadow-sm border border-gray-100 p-6 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-[#a52148] to-[#8a1c3c] rounded-full flex items-center justify-center text-white font-semibold",children:w}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:r}),e.jsxs("p",{className:"text-sm text-gray-500",children:["üìç ",f]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4 lg:gap-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-[#a52148]",children:y}),e.jsx("div",{className:"text-xs text-gray-500",children:"par km"})]}),e.jsxs("div",{className:`inline-flex items-center ${T} ${E} px-3 py-1 rounded-full text-sm font-medium`,children:[e.jsx("div",{className:`w-2 h-2 rounded-full mr-2 ${j}`}),C]}),e.jsx("div",{className:"text-sm text-gray-500",children:d}),e.jsx("div",{className:"flex gap-2",children:n.statut==="en_attente"?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>m(n.id,"approuv√©"),className:"bg-[#a52148] text-white px-4 py-2 rounded text-sm font-medium hover:bg-[#8a1c3c] transition-colors",children:"Approuver"}),e.jsx("button",{onClick:()=>m(n.id,"rejet√©"),className:"bg-gray-100 text-gray-700 px-4 py-2 rounded text-sm font-medium hover:bg-gray-200 transition-colors",children:"Rejeter"})]}):e.jsx("button",{onClick:()=>m(n.id,"en_attente"),className:"bg-[#a52148] text-white px-4 py-2 rounded text-sm font-medium hover:bg-[#8a1c3c] transition-colors",children:"R√©voquer"})})]})]})},n.id)})})]},r))})]})}function gs(){const a=new Date,[o,x]=c.useState(a.getFullYear()),[b,m]=c.useState(a.getMonth()),[p,i]=c.useState(!1),[D,k]=c.useState([]),[r,l]=c.useState([]),[n,w]=c.useState([]),[d,f]=c.useState(""),[y,T]=c.useState(!1),E=Be(),j=A=>n.find(q=>q.userId===A)||{totalDistance:0,totalTripCost:0,justified:0,unjustified:0},C=["Janvier","F√©vrier","Mars","Avril","Mai","Juin","Juillet","Ao√ªt","Septembre","Octobre","Novembre","D√©cembre"];c.useEffect(()=>{const A=a.getFullYear();k([A,A-1,A-2]),P.get("/users/").then(q=>l(q.data)).catch(q=>console.error(q))},[]),c.useEffect(()=>{(async()=>{try{const q=await P.get("/report/summary",{params:{year:o,month:b}});w(q.data)}catch(q){console.error("Failed to fetch summary:",q)}})()},[o,b]);const F=()=>{let A=b-1,q=o;A<0&&(A=11,q-=1),m(A),x(q)},J=()=>{let A=b+1,q=o;A>11&&(A=0,q+=1),m(A),x(q)},h=(A,q)=>{x(A),m(q),i(!1)},t=()=>{x(a.getFullYear()),m(a.getMonth())},L=new Date(o,b,1).toLocaleDateString("fr-FR",{month:"long",year:"numeric"}),Y=async()=>{try{const A=await P.get("/report/monthly-recap",{params:{year:o,month:b},responseType:"blob"}),re=`Recapitulatif_${new Date(o,b).toLocaleDateString("fr-FR",{month:"long"})}_${o}.xlsx`,ae=new Blob([A.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});Ue.saveAs(ae,re)}catch(A){console.error("Monthly recap export failed",A)}},u=async(A,q)=>{var Z,re;try{let ae;const le={userId:A,year:o,month:b};q==="excel"?ae="/report/excel":q==="pdf"?ae="/report/pdf":q==="both"&&(ae="/zip");const Ne=await P.get(ae,{params:le,responseType:"blob"});let xe;if(q==="both"){const we=Ne.headers["content-disposition"];if(we){const ie=we.match(/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/);ie&&ie[1]&&(xe=ie[1].replace(/['"]/g,""))}if(!xe){const ie=r.find(ne=>ne.id===A),be=new Date(o,b).toLocaleDateString("fr-FR",{month:"long"});xe=`${((Z=ie==null?void 0:ie.name)==null?void 0:Z.replace(/\s+/g,"_"))||`user${A}`}_${be}_${o}.zip`}}else{const ie=new Date(o,b).toLocaleDateString("fr-FR",{month:"long"}),ye=r.find(se=>se.id===A),be=((re=ye==null?void 0:ye.name)==null?void 0:re.replace(/\s+/g,"_"))||`user${A}`;q==="excel"?xe=`Note_de_frais_${be}_${ie}_${o}.xlsx`:q==="pdf"&&(xe=`Note_de_frais_${be}_${ie}_${o}.pdf`)}let de;q==="excel"?de="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":q==="pdf"?de="application/pdf":de="application/zip";const De=new Blob([Ne.data],{type:de});Ue.saveAs(De,xe)}catch(ae){console.error("Export failed",ae)}},I=A=>{E(`/agentDashboard/${A}`)},X=r.filter(A=>{const q=A.name.toLowerCase().includes(d.toLowerCase()),Z=j(A.id).totalDistance>0;return q&&(!y||Z)}),O=r.filter(A=>j(A.id).totalDistance>0).length,$=n.reduce((A,q)=>A+q.totalDistance,0),R=n.reduce((A,q)=>A+q.totalTripCost,0);return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-100",children:e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-2",style:{color:s.logo_text},children:"Consultation des Utilisateurs"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"G√©rez et exportez les donn√©es de vos utilisateurs"})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 mb-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center justify-center lg:justify-start gap-4",children:[e.jsx("button",{onClick:F,className:"p-3 rounded-xl hover:bg-gray-100 transition-all duration-200 hover:scale-105",style:{color:s.logo_text},children:e.jsx(is,{className:"w-6 h-6"})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>i(!p),className:"flex items-center gap-3 px-6 py-3 rounded-xl border-2 hover:bg-gray-50 transition-all duration-200 hover:scale-105",style:{borderColor:s.secondary,color:s.logo_text},children:[e.jsx(cs,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xl font-semibold capitalize",children:L})]}),p&&e.jsx("div",{className:"absolute z-20 top-full mt-2 left-1/2 transform -translate-x-1/2 bg-white rounded-2xl shadow-2xl border border-gray-200 p-6 w-80",children:D.map(A=>e.jsxs("div",{className:"mb-4 last:mb-0",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3 text-center",style:{color:s.logo_text},children:A}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:C.map((q,Z)=>e.jsx("button",{onClick:()=>h(A,Z),className:`p-2 rounded-lg text-sm font-medium transition-all duration-200 hover:scale-105 ${A===o&&Z===b?"text-white shadow-lg":"text-gray-700 hover:bg-gray-100"}`,style:A===o&&Z===b?{backgroundColor:s.primary}:{},children:q.substring(0,3)},`${A}-${Z}`))})]},A))})]}),e.jsx("button",{onClick:J,className:"p-3 rounded-xl hover:bg-gray-100 transition-all duration-200 hover:scale-105",style:{color:s.logo_text},children:e.jsx(ds,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3",children:[e.jsx("button",{onClick:t,className:"px-6 py-3 rounded-xl border-2 font-medium transition-all duration-200 hover:scale-105 hover:shadow-lg",style:{borderColor:s.secondary,color:s.logo_text,backgroundColor:"white"},children:"Aujourd'hui"}),e.jsxs("button",{onClick:Y,className:"flex items-center gap-3 px-6 py-3 rounded-xl text-white font-semibold shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105",style:{backgroundColor:s.primary},children:[e.jsx(Ds,{className:"w-4 h-4"}),"R√©capitulatif du mois"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-all duration-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Utilisateurs actifs"}),e.jsx("p",{className:"text-3xl font-bold mt-1",style:{color:s.primary},children:O})]}),e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center",style:{backgroundColor:s.primary+"20"},children:e.jsx("span",{className:"text-2xl",style:{color:s.primary},children:"üë•"})})]})}),e.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-all duration-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Distance totale"}),e.jsxs("p",{className:"text-3xl font-bold mt-1",style:{color:s.primary},children:[$.toLocaleString()," km"]})]}),e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center",style:{backgroundColor:s.primary+"20"},children:e.jsx("span",{className:"text-2xl",style:{color:s.primary},children:"üöó"})})]})}),e.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-all duration-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Co√ªt total"}),e.jsxs("p",{className:"text-3xl font-bold mt-1",style:{color:s.primary},children:[R.toFixed(2)," DH"]})]}),e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center",style:{backgroundColor:s.primary+"20"},children:e.jsx("span",{className:"text-2xl",style:{color:s.primary},children:"üí∞"})})]})})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(Te,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Rechercher par nom d'utilisateur...",value:d,onChange:A=>f(A.target.value),className:"w-full pl-12 pr-4 py-3 rounded-xl border-2 focus:outline-none focus:ring-2 transition-all duration-200",style:{borderColor:s.secondary,focusRingColor:s.primary}})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Je,{className:"w-5 h-5 text-gray-400"}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:y,onChange:A=>T(A.target.checked),className:"w-5 h-5 rounded border-2 text-primary focus:ring-2",style:{accentColor:s.primary}}),e.jsx("span",{className:"text-gray-700 font-medium",children:"Afficher uniquement les utilisateurs avec des donn√©es"})]})]})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-6",children:X.map(A=>{const q=j(A.id),Z=q&&q.totalDistance>0;return e.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 overflow-hidden hover:shadow-lg transition-all duration-300 flex flex-col justify-between min-h-80",children:[e.jsx("div",{className:"p-4 border-b border-gray-100 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md",style:{backgroundColor:s.primary},children:A.name.split(" ").map(re=>re.charAt(0)).join("").toUpperCase()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-bold truncate",style:{color:s.logo_text},children:A.name}),e.jsx("button",{onClick:()=>I(A.id),className:"ml-2 p-2 rounded-full hover:bg-gray-100 text-gray-500 hover:text-blue-600 transition-all",title:"Modifier les d√©placements",children:e.jsx(Ss,{className:"w-4 h-4 cursor-pointer"})})]}),e.jsx("p",{className:"text-gray-500 text-xs",children:Z?"Utilisateur actif":"Aucune activit√©"})]})]})}),e.jsx("div",{className:"p-4 flex-1 flex flex-col justify-center",children:Z?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-500 rounded-md flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs",children:"üöó"})}),e.jsx("span",{className:"font-medium text-blue-800 text-sm",children:"Distance"})]}),e.jsxs("span",{className:"text-blue-900 font-bold text-sm",children:[q.totalDistance.toLocaleString()," km"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-md flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs",children:"üí∞"})}),e.jsx("span",{className:"font-medium text-green-800 text-sm",children:"Frais"})]}),e.jsxs("span",{className:"text-green-900 font-bold text-sm",children:[q.totalTripCost.toFixed(2)," DH"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-purple-500 rounded-md flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs",children:"‚úì"})}),e.jsx("span",{className:"font-medium text-purple-800 text-sm",children:"Justifi√©es"})]}),e.jsxs("span",{className:"text-purple-900 font-bold text-sm",children:[q.justified,"/",q.justified+q.unjustified]})]})]}):e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-gray-400 text-lg",children:"üìä"})}),e.jsx("p",{className:"text-gray-500 font-medium text-sm",children:"Aucune donn√©e"}),e.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"pour ce mois"})]})}),e.jsx("div",{className:"p-4 bg-gray-50 border-t border-gray-100 flex-shrink-0",children:e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("button",{onClick:()=>u(A.id,"excel"),className:"flex flex-col items-center gap-1 p-2 bg-green-500 hover:bg-green-600 text-white rounded-lg transition-all duration-200 hover:scale-105",children:[e.jsx(Fs,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Excel"})]}),e.jsxs("button",{onClick:()=>u(A.id,"pdf"),className:"flex flex-col items-center gap-1 p-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-all duration-200 hover:scale-105",children:[e.jsx(Es,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:"PDF"})]}),e.jsxs("button",{onClick:()=>u(A.id,"both"),className:"flex flex-col items-center gap-1 p-2 text-white rounded-lg transition-all duration-200 hover:scale-105",style:{backgroundColor:s.primary},children:[e.jsx(Ts,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Complet"})]})]})})]},A.id)})}),X.length===0&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(Te,{className:"w-12 h-12 text-gray-400"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-600 mb-2",children:"Aucun utilisateur trouv√©"}),e.jsx("p",{className:"text-gray-500",children:"Essayez d'ajuster vos crit√®res de recherche ou de filtrage"})]})]})})}function fs(){const[a,o]=c.useState([]),[x,b]=c.useState(""),[m,p]=c.useState(null),[i,D]=c.useState(""),[k,r]=c.useState({open:!1,id:null}),[l,n]=c.useState(null);c.useEffect(()=>{(async()=>{try{const C=await P.get("/roles");o(C.data)}catch(C){console.error(C)}})()},[]),c.useEffect(()=>{const j=C=>{if(m!==null){const F=document.querySelectorAll("[data-role-card]");!Array.from(F).some(h=>h.contains(C.target))&&E()}};return document.addEventListener("mousedown",j),document.addEventListener("touchstart",j),()=>{document.removeEventListener("mousedown",j),document.removeEventListener("touchstart",j)}},[m]);const w=async()=>{const j=x.trim().toLowerCase();if(j)try{const C=await P.post("/roles",{nom:j});o([...a,C.data]),b("")}catch(C){console.error(C)}},d=async j=>{const C=i.trim().toLowerCase();if(C)try{const F=await P.put(`/roles/${j}`,{nom:C});o(a.map(J=>J.id===j?F.data:J)),p(null),D(""),n(null)}catch(F){console.error(F)}},f=async j=>{try{await P.delete(`/roles/${j}`),o(a.filter(C=>C.id!==j)),r({open:!1,id:null}),n(null)}catch(C){console.error(C)}},y=j=>{m!==j&&n(l===j?null:j)},T=j=>{p(j.id),D(j.nom),n(null)},E=()=>{p(null),D(""),n(null)};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[e.jsxs("div",{className:"container mx-auto px-4 py-8 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-2",style:{color:s.logo_text},children:"Gestion des R√¥les"}),e.jsx("p",{className:"text-lg",style:{color:s.secondary},children:"Cr√©ez et g√©rez les r√¥les de votre organisation"})]}),e.jsx("div",{className:"max-w-2xl mx-auto mb-8",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6 md:p-8",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(ge,{className:"w-6 h-6 mr-3",style:{color:s.primary}}),e.jsx("h2",{className:"text-xl font-semibold",style:{color:s.logo_text},children:"Ajouter un nouveau r√¥le"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("input",{type:"text",placeholder:"Entrez le nom du r√¥le...",value:x,onChange:j=>b(j.target.value),onKeyDown:j=>j.key==="Enter"&&w(),className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-opacity-60 transition-colors text-gray-700",style:{focusBorderColor:s.primary}}),e.jsxs("button",{onClick:w,disabled:!x.trim(),className:"flex items-center px-6 py-3 rounded-xl text-white font-medium transition-all duration-200 hover:scale-105 hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100",style:{backgroundColor:s.primary},children:[e.jsx(ge,{className:"w-5 h-5 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Ajouter"})]})]})]})}),e.jsx("div",{className:"max-w-6xl mx-auto",children:a.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Me,{className:"w-6 h-6 mr-3",style:{color:s.primary}}),e.jsx("h2",{className:"text-2xl font-semibold",style:{color:s.logo_text},children:"R√¥les existants"})]}),e.jsxs("div",{className:"text-sm px-3 py-1 rounded-full",style:{backgroundColor:s.secondary,color:s.white},children:[a.length," r√¥le",a.length>1?"s":""]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 md:gap-6",children:a.map(j=>e.jsxs("div",{"data-role-card":!0,className:"group bg-white rounded-xl shadow-md border border-gray-200 p-6 hover:shadow-xl transition-all duration-300 hover:-translate-y-1 cursor-pointer",onClick:()=>y(j.id),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:`${s.primary}15`},children:e.jsx(Me,{className:"w-5 h-5",style:{color:s.primary}})}),e.jsx("div",{className:`flex gap-2 transition-opacity ${l===j.id?"opacity-100":"opacity-0 group-hover:opacity-100"}`,children:m===j.id?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:C=>{C.stopPropagation(),d(j.id)},className:"p-2 rounded-lg bg-green-100 text-green-600 hover:bg-green-200 transition-colors",children:e.jsx(Le,{className:"w-4 h-4"})}),e.jsx("button",{onClick:C=>{C.stopPropagation(),E()},className:"p-2 rounded-lg bg-gray-100 text-gray-600 hover:bg-gray-200 transition-colors",children:e.jsx(ve,{className:"w-4 h-4"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:C=>{C.stopPropagation(),T(j)},className:"p-2 rounded-lg bg-blue-100 text-blue-600 hover:bg-blue-200 transition-colors",children:e.jsx(Ie,{className:"w-4 h-4"})}),e.jsx("button",{onClick:C=>{C.stopPropagation(),r({open:!0,id:j.id})},className:"p-2 rounded-lg bg-red-100 text-red-600 hover:bg-red-200 transition-colors",children:e.jsx(fe,{className:"w-4 h-4"})})]})})]}),e.jsx("div",{className:"text-center",children:m===j.id?e.jsx("input",{value:i,onChange:C=>D(C.target.value),onKeyDown:C=>C.key==="Enter"&&d(j.id),onClick:C=>C.stopPropagation(),className:"w-full px-3 py-2 text-center border-2 rounded-lg focus:outline-none text-lg font-semibold",style:{borderColor:s.primary},autoFocus:!0}):e.jsx("h3",{className:"text-lg font-semibold uppercase tracking-wide",style:{color:s.logo_text},children:j.nom})})]},j.id))})]}):e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 mb-6 rounded-full",style:{backgroundColor:`${s.secondary}30`},children:e.jsx(Me,{className:"w-10 h-10",style:{color:s.secondary}})}),e.jsx("h3",{className:"text-2xl font-semibold mb-2",style:{color:s.logo_text},children:"Aucun r√¥le cr√©√©"}),e.jsx("p",{className:"text-lg mb-6",style:{color:s.secondary},children:"Commencez par ajouter votre premier r√¥le"}),e.jsx("button",{onClick:()=>document.querySelector('input[placeholder*="Entrez"]').focus(),className:"px-6 py-3 rounded-xl text-white font-medium transition-all duration-200 hover:scale-105 hover:shadow-lg",style:{backgroundColor:s.primary},children:"Cr√©er un r√¥le"})]})})]}),e.jsx(Ee,{open:k.open,title:"Supprimer le r√¥le",message:"√ätes-vous s√ªr de vouloir supprimer ce r√¥le ? Cette action est irr√©versible.",onConfirm:()=>f(k.id),onCancel:()=>r({open:!1,id:null})})]})}function ys(){const[a,o]=c.useState([]),[x,b]=c.useState([]),[m,p]=c.useState([]),[i,D]=c.useState(null);c.useEffect(()=>{k()},[]);const k=async()=>{try{const[d,f,y]=await Promise.all([P.get("/taux-deplacement"),P.get("/roles"),P.get("/travel-types")]);o(d.data),b(f.data),p(y.data)}catch(d){console.error("Error fetching data:",d)}},r=(d,f)=>a.find(y=>y.roleId===d&&y.typeDeDeplacementId===f),l=async(d,f,y)=>{if(D(null),!!y)try{const T=r(d,f),E={roleId:d,typeDeDeplacementId:f,tarifParJour:parseFloat(y)};if(T){const j=await P.put(`/taux-deplacement/${T.id}`,E);o(a.map(C=>C.id===T.id?j.data:C))}else{const j=await P.post("/taux-deplacement",E);o([...a,j.data])}}catch(T){console.error("Error updating rate:",T)}},n=async d=>{try{await P.delete(`/taux-deplacement/${d}`),o(a.filter(f=>f.id!==d))}catch(f){console.error("Error deleting rate:",f)}},w=x.filter(d=>{var f;return((f=d.nom)==null?void 0:f.toLowerCase())!=="agent"});return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[e.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center shadow-lg",style:{backgroundColor:s.primary},children:e.jsx(ke,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold",style:{color:s.logo_text},children:"Taux de D√©placement"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"G√©rez les tarifs par r√¥le et type de d√©placement"})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:s.secondary},children:[e.jsx("th",{className:"px-6 py-4 text-left font-semibold text-gray-800 border-r border-white",children:e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("span",{children:"R√îLE"})})}),m.map(d=>e.jsx("th",{className:"px-6 py-4 text-center font-semibold text-gray-800 border-r border-white last:border-r-0",children:e.jsx("div",{className:"flex flex-col items-center space-y-1",children:e.jsx("span",{className:"text-sm font-medium",children:d.nom})})},d.id))]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:w.map(d=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 border-r border-gray-100",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:s.primary}}),e.jsx("span",{className:"font-semibold text-sm uppercase tracking-wide",style:{color:s.logo_text},children:d.nom})]})}),m.map(f=>{const y=r(d.id,f.id),T=(i==null?void 0:i.roleId)===d.id&&(i==null?void 0:i.typeId)===f.id;return e.jsx("td",{className:"px-6 py-4 text-center border-r border-gray-100 last:border-r-0",children:T?e.jsx("div",{className:"flex items-center justify-center space-x-2",children:e.jsx("input",{autoFocus:!0,type:"number",defaultValue:(y==null?void 0:y.tarifParJour)||"",className:"w-24 px-3 py-2 border border-gray-300 rounded-lg text-center focus:ring-2 focus:ring-opacity-50 focus:border-transparent",style:{focusRingColor:s.primary},onBlur:E=>l(d.id,f.id,E.target.value),onKeyDown:E=>{E.key==="Enter"&&l(d.id,f.id,E.target.value),E.key==="Escape"&&D(null)}})}):e.jsxs("div",{className:"group relative",children:[e.jsx("div",{className:"inline-flex items-center justify-center min-w-[120px] py-2 px-4 rounded-lg cursor-pointer transition-all duration-200 hover:bg-gray-100",onClick:()=>D({roleId:d.id,typeId:f.id}),children:y?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-semibold text-gray-800",children:Number(y.tarifParJour).toFixed(2)}),e.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"MAD"})]}):e.jsxs("div",{className:"flex items-center space-x-2 text-gray-400",children:[e.jsx(ge,{size:16}),e.jsx("span",{className:"text-sm",children:"Ajouter"})]})}),y&&e.jsx("button",{onClick:E=>{E.stopPropagation(),n(y.id)},className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 hover:bg-red-600 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsx(fe,{size:12})})]})},f.id)})]},d.id))})]})})})}),e.jsx("div",{className:"hidden md:block lg:hidden",children:e.jsx("div",{className:"grid gap-6",children:w.map(d=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-l-4",style:{backgroundColor:s.secondary,borderLeftColor:s.primary},children:e.jsx("h3",{className:"text-lg font-bold uppercase tracking-wide",style:{color:s.logo_text},children:d.nom})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-2 gap-4",children:m.map(f=>{const y=r(d.id,f.id),T=(i==null?void 0:i.roleId)===d.id&&(i==null?void 0:i.typeId)===f.id;return e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border border-gray-200 hover:border-gray-300 transition-colors",children:[e.jsx("div",{children:e.jsx("span",{className:"font-medium text-gray-700",children:f.nom})}),T?e.jsx("input",{autoFocus:!0,type:"number",defaultValue:(y==null?void 0:y.tarifParJour)||"",className:"w-24 px-3 py-2 border border-gray-300 rounded-lg text-right focus:ring-2 focus:ring-opacity-50 focus:border-transparent",style:{focusRingColor:s.primary},onBlur:E=>l(d.id,f.id,E.target.value)}):e.jsx("div",{className:"cursor-pointer px-3 py-2 rounded-lg hover:bg-gray-100 transition-colors",onClick:()=>D({roleId:d.id,typeId:f.id}),children:y?e.jsxs("span",{className:"font-semibold text-gray-800",children:[Number(y.tarifParJour).toFixed(2)," MAD"]}):e.jsx("span",{className:"text-gray-400 text-sm",children:"Ajouter tarif"})})]},f.id)})})})]},d.id))})}),e.jsx("div",{className:"block md:hidden",children:e.jsx("div",{className:"space-y-4",children:w.map(d=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 flex items-center space-x-3",style:{backgroundColor:s.secondary},children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:s.primary}}),e.jsx("h3",{className:"font-bold uppercase text-sm tracking-wide",style:{color:s.logo_text},children:d.nom})]}),e.jsx("div",{className:"p-4 space-y-3",children:m.map(f=>{const y=r(d.id,f.id),T=(i==null?void 0:i.roleId)===d.id&&(i==null?void 0:i.typeId)===f.id;return e.jsxs("div",{className:"flex items-center justify-between py-3 px-4 rounded-lg border border-gray-200",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:f.nom}),T?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{autoFocus:!0,type:"number",defaultValue:(y==null?void 0:y.tarifParJour)||"",className:"w-20 px-2 py-1 border border-gray-300 rounded text-right text-sm focus:ring-2 focus:ring-opacity-50 focus:border-transparent",style:{focusRingColor:s.primary},onBlur:E=>l(d.id,f.id,E.target.value)}),e.jsx("span",{className:"text-xs text-gray-500",children:"MAD"})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"cursor-pointer px-2 py-1 rounded hover:bg-gray-100 transition-colors",onClick:()=>D({roleId:d.id,typeId:f.id}),children:y?e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-800",children:Number(y.tarifParJour).toFixed(2)}),e.jsx("span",{className:"text-xs text-gray-500",children:"MAD"})]}):e.jsxs("div",{className:"flex items-center space-x-1 text-gray-400",children:[e.jsx(ge,{size:14}),e.jsx("span",{className:"text-xs",children:"Ajouter"})]})}),y&&e.jsx("button",{onClick:()=>n(y.id),className:"p-1 text-red-500 hover:text-red-700 transition-colors",children:e.jsx(fe,{size:14})})]})]},f.id)})})]},d.id))})}),w.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-4 rounded-full bg-gray-100 flex items-center justify-center",children:e.jsx(ke,{size:32,className:"text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun r√¥le disponible"}),e.jsx("p",{className:"text-gray-500",children:"Les r√¥les et types de d√©placement appara√Ætront ici une fois charg√©s."})]})]})]})}function bs(){const[a,o]=c.useState([]),[x,b]=c.useState(null),[m,p]=c.useState([]),[i,D]=c.useState(f()),[k,r]=c.useState(null),[l,n]=c.useState({open:!1,ruleId:null}),[w,d]=c.useState(!1);function f(){return{name:"",conditionType:"ALL",rateBeforeThreshold:"",rateAfterThreshold:"",thresholdKm:"",active:!0}}c.useEffect(()=>{y()},[]),c.useEffect(()=>{x&&T()},[x]);const y=async()=>{try{d(!0);const t=await P.get("/users?withCar=true");o(t.data),t.data.length&&b(t.data[0].id)}catch(t){console.error("Error fetching users:",t)}finally{d(!1)}},T=async()=>{try{d(!0);const t=await P.get(`/vehicule-rates/user/${x}`);p(t.data)}catch(t){console.error("Error fetching rates:",t)}finally{d(!1)}},E=t=>{const{name:v,value:L,type:Y,checked:u}=t.target;D(I=>({...I,[v]:Y==="checkbox"?u:L}))},j=async t=>{t.preventDefault();try{d(!0);const v={...i,userId:x,rateAfterThreshold:i.conditionType==="THRESHOLD"?i.rateAfterThreshold:null,thresholdKm:i.conditionType==="THRESHOLD"?i.thresholdKm:null};k?await P.patch(`/vehicule-rates/${k}`,v):await P.post("/vehicule-rates",v),D(f()),r(null),T()}catch(v){console.error("Error saving rate:",v)}finally{d(!1)}},C=t=>{D({name:t.name,conditionType:t.conditionType,rateBeforeThreshold:t.rateBeforeThreshold,rateAfterThreshold:t.rateAfterThreshold||"",thresholdKm:t.thresholdKm||"",active:t.active}),r(t.id),window.scrollTo({top:0,behavior:"smooth"})},F=async t=>{try{d(!0),await P.delete(`/vehicule-rates/${t}`),T()}catch(v){console.error("Error deleting rate:",v)}finally{d(!1)}},J=()=>{D(f()),r(null)},h=a.find(t=>t.id==x);return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:s.primary+"20"},children:e.jsx(Ye,{className:"w-6 h-6",style:{color:s.primary}})}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold",style:{color:s.primary},children:"Taux Kilom√©triques"})]}),e.jsx("p",{className:"text-gray-600 text-lg",children:"G√©rez les taux kilom√©triques par utilisateur"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Is,{className:"w-5 h-5",style:{color:s.logo_text}}),e.jsx("h2",{className:"text-xl font-semibold",style:{color:s.logo_text},children:"S√©lectionner un utilisateur"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("select",{value:x||"",onChange:t=>b(parseInt(t.target.value)),className:"w-full p-3 border-2 border-gray-200 rounded-lg focus:border-opacity-50 focus:outline-none transition-colors",style:{focusBorderColor:s.primary},disabled:w,children:[e.jsx("option",{value:"",children:"Choisir un utilisateur..."}),a.map(t=>e.jsx("option",{value:t.id,children:t.name||t.nomComplete||t.courriel},t.id))]}),h&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white font-semibold",style:{backgroundColor:s.primary},children:(h.name||h.nomComplete||h.courriel).charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",style:{color:s.logo_text},children:h.name||h.nomComplete}),e.jsx("p",{className:"text-sm text-gray-500",children:h.courriel})]})]})]})]}),x&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Bs,{className:"w-5 h-5",style:{color:s.logo_text}}),e.jsx("h2",{className:"text-xl font-semibold",style:{color:s.logo_text},children:k?"Modifier la r√®gle":"Nouvelle r√®gle"})]}),k&&e.jsx("button",{onClick:J,className:"px-4 py-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",children:"Annuler"})]}),e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:s.logo_text},children:"Nom de la r√®gle *"}),e.jsx("input",{name:"name",value:i.name,onChange:E,className:"w-full p-3 border-2 border-gray-200 rounded-lg focus:border-opacity-50 focus:outline-none transition-colors",placeholder:"Ex: Taux standard",required:!0,disabled:w})]}),e.jsxs("div",{className:"lg:col-span-1",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:s.logo_text},children:"Type de condition"}),e.jsxs("select",{name:"conditionType",value:i.conditionType,onChange:E,className:"w-full p-3 border-2 border-gray-200 rounded-lg focus:border-opacity-50 focus:outline-none transition-colors",disabled:w,children:[e.jsx("option",{value:"ALL",children:"Taux simple"}),e.jsx("option",{value:"THRESHOLD",children:"Taux avec seuil"})]})]}),e.jsxs("div",{className:"lg:col-span-1",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:s.logo_text},children:"Taux principal (dh/km) *"}),e.jsx("input",{type:"number",step:"0.01",name:"rateBeforeThreshold",value:i.rateBeforeThreshold,onChange:E,className:"w-full p-3 border-2 border-gray-200 rounded-lg focus:border-opacity-50 focus:outline-none transition-colors",placeholder:"Ex: 2.50",required:!0,disabled:w})]}),i.conditionType==="THRESHOLD"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"lg:col-span-1",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:s.logo_text},children:"Seuil (km)"}),e.jsx("input",{type:"number",name:"thresholdKm",value:i.thresholdKm,onChange:E,className:"w-full p-3 border-2 border-gray-200 rounded-lg focus:border-opacity-50 focus:outline-none transition-colors",placeholder:"Ex: 100",disabled:w})]}),e.jsxs("div",{className:"lg:col-span-1",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:s.logo_text},children:"Taux apr√®s seuil (dh/km)"}),e.jsx("input",{type:"number",step:"0.01",name:"rateAfterThreshold",value:i.rateAfterThreshold,onChange:E,className:"w-full p-3 border-2 border-gray-200 rounded-lg focus:border-opacity-50 focus:outline-none transition-colors",placeholder:"Ex: 1.80",disabled:w})]})]}),e.jsxs("div",{className:`flex items-center gap-3 ${i.conditionType==="THRESHOLD"?"lg:col-span-1":"lg:col-span-2"}`,children:[e.jsx("input",{type:"checkbox",name:"active",checked:i.active,onChange:E,className:"w-5 h-5 rounded focus:outline-none",style:{accentColor:s.primary},disabled:w}),e.jsx("label",{className:"text-sm font-medium",style:{color:s.logo_text},children:"R√®gle active"})]})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:e.jsxs("button",{type:"submit",disabled:w,className:"px-6 py-3 text-white font-semibold rounded-lg flex items-center gap-2 hover:opacity-90 transition-opacity disabled:opacity-50",style:{backgroundColor:s.primary},children:[e.jsx(ge,{size:18}),k?"Modifier":"Ajouter"]})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("h2",{className:"text-xl font-semibold",style:{color:s.logo_text},children:["R√®gles configur√©es (",m.length,")"]})}),w?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 mx-auto mb-4",style:{borderColor:s.primary}}),e.jsx("p",{className:"text-gray-500",children:"Chargement..."})]}):m.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(Rs,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"Aucune r√®gle configur√©e"}),e.jsx("p",{className:"text-gray-400",children:"Ajoutez votre premi√®re r√®gle ci-dessus"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden md:block overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{style:{backgroundColor:s.secondary+"30"},children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",style:{color:s.logo_text},children:"Nom"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",style:{color:s.logo_text},children:"Type"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",style:{color:s.logo_text},children:"Taux (dh/km)"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",style:{color:s.logo_text},children:"Seuil (km)"}),e.jsx("th",{className:"px-6 py-4 text-center text-sm font-semibold",style:{color:s.logo_text},children:"Statut"}),e.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold",style:{color:s.logo_text},children:"Actions"})]})}),e.jsx("tbody",{children:m.map((t,v)=>e.jsxs("tr",{className:`border-b border-gray-100 hover:bg-gray-50 transition-colors ${v%2===0?"bg-white":"bg-gray-50/50"}`,children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"font-medium",style:{color:s.logo_text},children:t.name})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${t.conditionType==="ALL"?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"}`,children:t.conditionType==="ALL"?"Simple":"Avec seuil"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-sm",style:{color:s.logo_text},children:[t.rateBeforeThreshold,t.conditionType==="THRESHOLD"&&t.rateAfterThreshold&&e.jsxs("span",{className:"text-gray-500",children:[" ‚Üí ",t.rateAfterThreshold]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm",style:{color:s.logo_text},children:t.thresholdKm||"-"})}),e.jsx("td",{className:"px-6 py-4 text-center",children:t.active?e.jsx(We,{className:"w-5 h-5 text-green-500 mx-auto"}):e.jsx(Xe,{className:"w-5 h-5 text-red-500 mx-auto"})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>C(t),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",disabled:w,children:e.jsx(Ie,{size:16})}),e.jsx("button",{onClick:()=>n({open:!0,ruleId:t.id}),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",disabled:w,children:e.jsx(fe,{size:16})})]})})]},t.id))})]})}),e.jsx("div",{className:"md:hidden space-y-4 p-4",children:m.map(t=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",style:{color:s.logo_text},children:t.name}),e.jsx("span",{className:`inline-block mt-1 px-2 py-1 rounded-full text-xs font-medium ${t.conditionType==="ALL"?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"}`,children:t.conditionType==="ALL"?"Simple":"Avec seuil"})]}),e.jsx("div",{className:"flex items-center gap-1",children:t.active?e.jsx(We,{className:"w-5 h-5 text-green-500"}):e.jsx(Xe,{className:"w-5 h-5 text-red-500"})})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Taux principal:"}),e.jsxs("span",{className:"font-medium",style:{color:s.logo_text},children:[t.rateBeforeThreshold," dh/km"]})]}),t.conditionType==="THRESHOLD"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Seuil:"}),e.jsxs("span",{className:"font-medium",style:{color:s.logo_text},children:[t.thresholdKm||"-"," km"]})]}),t.rateAfterThreshold&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Taux apr√®s seuil:"}),e.jsxs("span",{className:"font-medium",style:{color:s.logo_text},children:[t.rateAfterThreshold," dh/km"]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-3 border-t border-gray-200",children:[e.jsxs("button",{onClick:()=>C(t),className:"flex items-center gap-1 px-3 py-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors text-sm",disabled:w,children:[e.jsx(Ie,{size:14}),"Modifier"]}),e.jsxs("button",{onClick:()=>n({open:!0,ruleId:t.id}),className:"flex items-center gap-1 px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors text-sm",disabled:w,children:[e.jsx(fe,{size:14}),"Supprimer"]})]})]},t.id))})]})]})]})]}),e.jsx(Ee,{open:l.open,title:"Supprimer la r√®gle",message:"Cette action est irr√©versible. Voulez-vous continuer ?",onCancel:()=>n({open:!1,ruleId:null}),onConfirm:()=>{F(l.ruleId),n({open:!1,ruleId:null})}})]})}function js(){const[a,o]=c.useState([]),[x,b]=c.useState([]),[m,p]=c.useState([]),[i,D]=c.useState(""),[k,r]=c.useState(""),[l,n]=c.useState({codeChantier:"",designation:"",ville:"",typeDeDeplacementId:""}),[w,d]=c.useState(null),[f,y]=c.useState({open:!1,chantierId:null}),[T,E]=c.useState(!1);c.useEffect(()=>{j(),C()},[]),c.useEffect(()=>{F()},[a,i,k]);const j=async()=>{const u=await P.get("/chantiers");o(u.data)},C=async()=>{const u=await P.get("/travel-types");b(u.data)},F=()=>{let u=a;i&&(u=u.filter(I=>I.codeChantier.toLowerCase().includes(i.toLowerCase())||I.designation.toLowerCase().includes(i.toLowerCase())||I.ville.toLowerCase().includes(i.toLowerCase()))),k&&(u=u.filter(I=>I.typeDeDeplacementId.toString()===k)),p(u)},J=u=>{const{name:I,value:X}=u.target;n(O=>({...O,[I]:X}))},h=async u=>{u.preventDefault(),w?await P.patch(`/chantiers/${w}`,l):await P.post("/chantiers",l),t(),j(),E(!1)},t=()=>{n({codeChantier:"",designation:"",ville:"",typeDeDeplacementId:""}),d(null)},v=u=>{n({codeChantier:u.codeChantier,designation:u.designation,ville:u.ville,typeDeDeplacementId:u.typeDeDeplacementId}),d(u.id),E(!0),window.scrollTo({top:0,behavior:"smooth"})},L=async u=>{await P.delete(`/chantiers/${u}`),j()},Y=()=>{t(),E(!0)};return e.jsxs("div",{className:"min-h-screen",style:{backgroundColor:"#f8fafc"},children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 lg:py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl lg:text-4xl font-bold",style:{color:s.primary},children:"Gestion des Chantiers"}),e.jsx("p",{className:"mt-2 text-lg",style:{color:s.logo_text},children:"G√©rez vos chantiers et leurs d√©placements"})]}),e.jsxs("button",{onClick:Y,className:"inline-flex items-center gap-2 px-6 py-3 rounded font-semibold text-white shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200",style:{backgroundColor:s.primary},children:[e.jsx(ge,{size:20}),"Nouveau Chantier"]})]})}),T&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-100",children:e.jsx("h2",{className:"text-2xl font-bold",style:{color:s.primary},children:w?"Modifier le Chantier":"Nouveau Chantier"})}),e.jsxs("form",{onSubmit:h,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:s.logo_text},children:"Code Chantier"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ms,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2",style:{color:s.secondary}}),e.jsx("input",{name:"codeChantier",value:l.codeChantier,onChange:J,placeholder:"Ex: CH001",className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded focus:ring-2 focus:border-transparent transition-all",style:{focusRingColor:s.primary+"50"},required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:s.logo_text},children:"D√©signation"}),e.jsxs("div",{className:"relative",children:[e.jsx($e,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2",style:{color:s.secondary}}),e.jsx("input",{name:"designation",value:l.designation,onChange:J,placeholder:"Nom du chantier",className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded focus:ring-2 focus:border-transparent transition-all",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:s.logo_text},children:"Ville"}),e.jsxs("div",{className:"relative",children:[e.jsx(ke,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2",style:{color:s.secondary}}),e.jsx("input",{name:"ville",value:l.ville,onChange:J,placeholder:"Ville du chantier",className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded focus:ring-2 focus:border-transparent transition-all",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:s.logo_text},children:"Type de D√©placement"}),e.jsxs("select",{name:"typeDeDeplacementId",value:l.typeDeDeplacementId,onChange:J,className:"w-full px-4 py-3 border border-gray-200 rounded focus:ring-2 focus:border-transparent transition-all",required:!0,children:[e.jsx("option",{value:"",children:"S√©lectionner un type"}),x.map(u=>e.jsx("option",{value:u.id,children:u.nom},u.id))]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{E(!1),t()},className:"flex-1 px-6 py-3 border border-gray-200 text-gray-700 rounded font-semibold hover:bg-gray-50 transition-colors",children:"Annuler"}),e.jsx("button",{type:"submit",className:"flex-1 px-6 py-3 text-white rounded font-semibold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200",style:{backgroundColor:s.primary},children:w?"Modifier":"Cr√©er"})]})]})]})}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6 mb-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Te,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2",style:{color:s.secondary}}),e.jsx("input",{type:"text",placeholder:"Rechercher par code, d√©signation ou ville...",value:i,onChange:u=>D(u.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded focus:ring-2 focus:border-transparent transition-all"})]})}),e.jsx("div",{className:"lg:w-64",children:e.jsxs("select",{value:k,onChange:u=>r(u.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded focus:ring-2 focus:border-transparent transition-all",children:[e.jsx("option",{value:"",children:"Tous les types"}),x.map(u=>e.jsx("option",{value:u.id,children:u.nom},u.id))]})})]})}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"hidden lg:block overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{style:{backgroundColor:s.secondary+"20"},children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",style:{color:s.logo_text},children:"Code"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",style:{color:s.logo_text},children:"D√©signation"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",style:{color:s.logo_text},children:"Ville"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",style:{color:s.logo_text},children:"Type"}),e.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold",style:{color:s.logo_text},children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:m.map(u=>{var I;return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium",style:{backgroundColor:s.primary+"15",color:s.primary},children:u.codeChantier})}),e.jsx("td",{className:"px-6 py-4 font-medium",style:{color:s.black},children:u.designation}),e.jsx("td",{className:"px-6 py-4",style:{color:s.logo_text},children:u.ville}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium",style:{backgroundColor:s.secondary+"30",color:s.logo_text},children:(I=u.typeDeDeplacement)==null?void 0:I.nom})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsxs("button",{onClick:()=>v(u),className:"inline-flex items-center gap-1 px-3 py-2 text-sm font-medium text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors",children:[e.jsx(Ie,{size:16}),"Modifier"]}),e.jsxs("button",{onClick:()=>y({open:!0,chantierId:u.id}),className:"inline-flex items-center gap-1 px-3 py-2 text-sm font-medium text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg transition-colors",children:[e.jsx(fe,{size:16}),"Supprimer"]})]})})]},u.id)})})]})}),e.jsx("div",{className:"lg:hidden divide-y divide-gray-100",children:m.map(u=>{var I;return e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{children:[e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium mb-2",style:{backgroundColor:s.primary+"15",color:s.primary},children:u.codeChantier}),e.jsx("h3",{className:"font-semibold text-lg",style:{color:s.black},children:u.designation})]})}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ke,{size:16,style:{color:s.secondary}}),e.jsx("span",{style:{color:s.logo_text},children:u.ville})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Je,{size:16,style:{color:s.secondary}}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-sm",style:{backgroundColor:s.secondary+"30",color:s.logo_text},children:(I=u.typeDeDeplacement)==null?void 0:I.nom})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>v(u),className:"flex-1 inline-flex items-center justify-center gap-2 px-4 py-2 text-sm font-medium text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors",children:[e.jsx(Ie,{size:16}),"Modifier"]}),e.jsxs("button",{onClick:()=>y({open:!0,chantierId:u.id}),className:"flex-1 inline-flex items-center justify-center gap-2 px-4 py-2 text-sm font-medium text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg transition-colors",children:[e.jsx(fe,{size:16}),"Supprimer"]})]})]},u.id)})}),m.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx($e,{size:48,className:"mx-auto mb-4",style:{color:s.secondary}}),e.jsx("h3",{className:"text-lg font-medium mb-2",style:{color:s.logo_text},children:"Aucun chantier trouv√©"}),e.jsx("p",{style:{color:s.secondary},children:i||k?"Essayez de modifier vos filtres de recherche":"Commencez par ajouter votre premier chantier"})]})]})]}),e.jsx(Ee,{open:f.open,title:"Supprimer le chantier",message:"Cette action est irr√©versible. Voulez-vous continuer ?",onCancel:()=>y({open:!1,chantierId:null}),onConfirm:()=>{L(f.chantierId),y({open:!1,chantierId:null})}})]})}function rt(){const[a,o]=c.useState("accounts"),x=()=>{switch(a){case"accounts":return e.jsx(Pe,{},"accounts");case"expenses":return e.jsx(ps,{},"expenses");case"travel":return e.jsx(hs,{},"travel");case"mission":return e.jsx(st,{},"mission");case"carloan":return e.jsx(tt,{},"carloan");case"manager":return e.jsx(gs,{},"manager");case"role":return e.jsx(fs,{},"role");case"travelrates":return e.jsx(ys,{},"travelrates");case"carrates":return e.jsx(bs,{},"carrates");case"chantier":return e.jsx(js,{},"chantier");default:return e.jsx(Pe,{},"accounts-default")}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx(et,{activeTab:a,setActiveTab:o}),e.jsx("div",{className:"mt-8",children:x()})]})})}function at(){const a=Be(),[o,x]=c.useState(!0),[b,m]=c.useState(!1),[p,i]=c.useState(""),[D,k]=c.useState(""),[r,l]=c.useState(""),[n,w]=c.useState({nomComplete:"",courriel:"",motDePasse:"",confirmPassword:"",cartNational:"",possedeVoiturePersonnelle:!1}),[d,f]=c.useState(!1);c.useEffect(()=>{const C=localStorage.getItem("token")||sessionStorage.getItem("token");if(!C){a("/login");return}P.defaults.headers.common.Authorization=`Bearer ${C}`,(async()=>{var J,h,t;try{const{data:v}=await P.get("/users/me");w({nomComplete:v.nomComplete||"",courriel:v.courriel||"",cartNational:v.cartNational||"",motDePasse:"",confirmPassword:"",possedeVoiturePersonnelle:v.possedeVoiturePersonnelle||!1})}catch(v){console.error("loadData ERROR ‚Üí",v),((J=v.response)==null?void 0:J.status)!==401&&(i(((t=(h=v.response)==null?void 0:h.data)==null?void 0:t.message)||v.message||"Erreur lors du chargement."),k("error"),l("general"))}finally{x(!1)}})()},[a]);const y=C=>{const{name:F,value:J,type:h,checked:t}=C.target;w(v=>({...v,[F]:h==="checkbox"?t:J})),p&&(i(""),k(""),l(""))},T=()=>(i(""),k(""),l(""),n.nomComplete.trim()?n.courriel.includes("@")?!n.cartNational.trim()||n.cartNational.trim().length<5?(i("La Carte Nationale (CNIE) est requise et doit contenir au moins 5 caract√®res."),k("error"),l("personal"),!1):n.motDePasse&&n.motDePasse!==n.confirmPassword?(i("Les mots de passe ne correspondent pas"),k("error"),l("password"),!1):n.motDePasse&&n.motDePasse.length<6?(i("Le mot de passe doit contenir au moins 6 caract√®res"),k("error"),l("password"),!1):!0:(i("Une adresse email valide est requise"),k("error"),l("personal"),!1):(i("Le nom complet est requis"),k("error"),l("personal"),!1)),E=async()=>{var C,F,J;if(T()){m(!0),i(""),k(""),l("");try{const h={nomComplete:n.nomComplete.trim(),courriel:n.courriel.trim(),cartNational:n.cartNational.trim(),possedeVoiturePersonnelle:n.possedeVoiturePersonnelle,...n.motDePasse?{motDePasse:n.motDePasse}:{}};await P.put("/users/me",h),i("Profil mis √† jour avec succ√®s !"),k("success"),l("general"),w(t=>({...t,motDePasse:"",confirmPassword:""}))}catch(h){console.error("handleSubmit ERROR ‚Üí",h),((C=h.response)==null?void 0:C.status)!==401&&(i(((J=(F=h.response)==null?void 0:F.data)==null?void 0:J.message)||h.message||"Erreur lors de la mise √† jour."),k("error"),l("general"))}finally{m(!1)}}},j=({section:C})=>!p||r!==C?null:e.jsx("div",{className:`mb-4 p-3 rounded-md ${D==="success"?"bg-green-50 border border-green-200 text-green-700":"bg-red-50 border border-red-200 text-red-700"}`,children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:D==="success"?e.jsx("svg",{className:"h-5 w-5 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):e.jsx("svg",{className:"h-5 w-5 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("div",{className:"ml-3 flex-1",children:e.jsx("p",{className:"text-sm",children:p})}),e.jsx("button",{onClick:()=>{i(""),k(""),l("")},className:"ml-auto text-gray-400 hover:text-gray-600",children:"√ó"})]})});return o?e.jsx("div",{className:"max-w-4xl mx-auto p-6",children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):e.jsxs("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 bg-white",children:[e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Param√®tres du profil"}),e.jsx("p",{className:"text-gray-600 mt-2 text-sm sm:text-base",children:"G√©rez vos informations personnelles"})]}),e.jsx(j,{section:"general"}),e.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[e.jsxs("div",{className:"bg-gray-50 p-4 sm:p-6 rounded",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900 mb-3 sm:mb-4",children:"Informations personnelles"}),e.jsx(j,{section:"personal"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom complet *"}),e.jsx("input",{type:"text",name:"nomComplete",value:n.nomComplete,onChange:y,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Adresse e-mail *"}),e.jsx("input",{type:"email",name:"courriel",value:n.courriel,onChange:y,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Carte Nationale (CNIE) *"}),e.jsx("input",{type:"text",name:"cartNational",value:n.cartNational,onChange:y,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 sm:p-6 rounded",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900 mb-3 sm:mb-4",children:"Mot de passe"}),e.jsx("p",{className:"text-sm text-gray-600 mb-3 sm:mb-4",children:"Laissez vide pour conserver le mot de passe actuel"}),e.jsx(j,{section:"password"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nouveau mot de passe"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:d?"text":"password",name:"motDePasse",value:n.motDePasse,onChange:y,className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base"}),e.jsx("button",{type:"button",onClick:()=>f(!d),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:d?e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})}):e.jsxs("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542 7z"})]})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirmer le mot de passe"}),e.jsx("input",{type:d?"text":"password",name:"confirmPassword",value:n.confirmPassword,onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:E,disabled:b,className:"w-full sm:w-auto px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed text-sm sm:text-base",style:{backgroundColor:s==null?void 0:s.primary,"--tw-ring-color":`${s==null?void 0:s.primary}40`},children:b?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Enregistrement..."]}):"Enregistrer les modifications"})})]})]})}function lt(){const a=Be(),[o,x]=c.useState([]),[b,m]=c.useState([]),[p,i]=c.useState(!0),[D,k]=c.useState(!1),[r,l]=c.useState(""),[n,w]=c.useState(""),[d,f]=c.useState(!1),[y,T]=c.useState(null),[E,j]=c.useState(""),[C,F]=c.useState("");c.useEffect(()=>{const R=localStorage.getItem("token")||sessionStorage.getItem("token");if(!R){a("/login");return}je.defaults.headers.common.Authorization=`Bearer ${R}`,(async()=>{try{const[q,Z]=await Promise.all([je.get("http://localhost:3001/api/user-daily-returns"),je.get("http://localhost:3001/api/travel-types")]);x(q.data),m(Z.data)}catch(q){console.error("Error fetching data for daily returns:",q),l("Erreur lors du chargement des donn√©es."),w("error")}finally{i(!1)}})()},[a]);const J=()=>{T(null),j(""),F(""),f(!1),l(""),w("")},h=()=>{J(),f(!0)},t=R=>{T(R),j(R.typeDeDeplacementId),F(R.tarifParJour.toString()),f(!0),l(""),w("")},v=async R=>{var re,ae;if(R.preventDefault(),k(!0),l(""),w(""),!E||!C){l("Veuillez remplir tous les champs."),w("error"),k(!1);return}const A=parseFloat(C);if(isNaN(A)||A<=0){l("Le tarif par jour doit √™tre un nombre positif."),w("error"),k(!1);return}if(o.some(le=>le.typeDeDeplacementId===E&&(!y||le.id!==y.id))){l("Vous avez d√©j√† une indemnit√© pour ce type de d√©placement."),w("error"),k(!1);return}const Z={typeDeDeplacementId:E,tarifParJour:A};try{y?(await je.put(`http://localhost:3001/api/user-daily-returns/${y.id}`,Z),l("Indemnit√© journali√®re mise √† jour avec succ√®s ! Son statut est revenu √† 'en attente'.")):(await je.post("http://localhost:3001/api/user-daily-returns",Z),l("Demande d'indemnit√© journali√®re soumise avec succ√®s !")),w("success");const le=await je.get("http://localhost:3001/api/user-daily-returns");x(le.data),J()}catch(le){console.error("Error saving daily return:",le),l(((ae=(re=le.response)==null?void 0:re.data)==null?void 0:ae.error)||"Erreur lors de l'enregistrement."),w("error")}finally{k(!1)}},[L,Y]=c.useState(!1),[u,I]=c.useState(null),X=async()=>{var R,A;Y(!1),k(!0);try{await je.delete(`http://localhost:3001/api/user-daily-returns/${u}`),x(q=>q.filter(Z=>Z.id!==u)),l("Indemnit√© journali√®re supprim√©e avec succ√®s !"),w("success")}catch(q){l(((A=(R=q.response)==null?void 0:R.data)==null?void 0:A.error)||"Erreur lors de la suppression."),w("error")}finally{k(!1),I(null)}},O=R=>{switch(R){case"approuve":return"bg-green-100 text-green-800";case"en_attente":return"bg-yellow-100 text-yellow-800";case"rejete":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},$=()=>{const R=new Set(o.filter(A=>!y||A.id!==y.id).map(A=>A.typeDeDeplacementId));return b.filter(A=>!R.has(A.id))};return p?e.jsx("div",{className:"max-w-4xl mx-auto p-4 sm:p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Chargement..."})]})})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"max-w-4xl mx-auto mt-12 p-4 sm:p-6 bg-white rounded-md shadow-md",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-4",children:"Gestion des indemnit√©s journali√®res"}),e.jsx("p",{className:"text-gray-600 mb-6 text-sm sm:text-base",children:"Ajoutez, modifiez ou supprimez vos demandes d'indemnit√©s journali√®res pour les d√©placements professionnels."}),r&&e.jsx("div",{className:`mb-4 p-3 rounded-md ${n==="success"?"bg-green-50 border border-green-200 text-green-700":"bg-red-50 border border-red-200 text-red-700"}`,children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:n==="success"?e.jsx("svg",{className:"h-5 w-5 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):e.jsx("svg",{className:"h-5 w-5 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("div",{className:"ml-3 flex-1",children:e.jsx("p",{className:"text-sm sm:text-base",children:r})}),e.jsx("button",{onClick:()=>{l(""),w("")},className:"ml-auto text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),!d&&$().length>0&&e.jsxs("button",{onClick:h,className:"mb-6 inline-flex items-center px-4 py-2 rounded-md shadow-sm text-sm font-medium text-white",style:{backgroundColor:s.primary,"--tw-ring-color":`${s.primary}40`},children:[e.jsx("svg",{className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Ajouter une indemnit√©"]}),!d&&$().length===0&&e.jsx("p",{className:"mb-6 italic text-gray-600",children:"Vous avez d√©j√† des indemnit√©s pour tous les types de d√©placement disponibles."}),d&&e.jsxs("div",{className:"bg-gray-50 p-4 sm:p-6 rounded-md mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:y?"Modifier l'indemnit√©":"Nouvelle indemnit√© journali√®re"}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"typeDeDeplacement",className:"block text-sm font-medium text-gray-700",children:"Type de d√©placement"}),e.jsxs("select",{id:"typeDeDeplacement",value:E,onChange:R=>j(R.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[e.jsx("option",{value:"",children:"S√©lectionnez un type"}),$().map(R=>e.jsx("option",{value:R.id,children:R.nom},R.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"tarifParJour",className:"block text-sm font-medium text-gray-700",children:"Tarif par jour (MAD)"}),e.jsx("input",{type:"number",id:"tarifParJour",step:"0.01",min:"0",value:C,onChange:R=>F(R.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Ex: 50.00"})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:J,className:"px-4 py-2 border rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:ring-indigo-500",children:"Annuler"}),e.jsx("button",{type:"submit",disabled:D,className:"px-4 py-2 rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:ring-blue-500",style:{backgroundColor:s.primary,"--tw-ring-color":`${s.primary}40`},children:D?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Enregistrement..."]}):y?"Mettre √† jour":"Soumettre"})]})]})]}),o.length===0&&!p&&!d&&e.jsx("p",{className:"italic text-gray-500",children:'Aucune indemnit√© journali√®re trouv√©e. Cliquez sur "Ajouter une indemnit√©" pour en cr√©er une.'}),o.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden sm:block overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 table-fixed",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 sm:px-6 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),e.jsx("th",{className:"px-2 sm:px-6 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Tarif"}),e.jsx("th",{className:"px-2 sm:px-6 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Statut"}),e.jsx("th",{className:"px-2 sm:px-6 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),e.jsx("th",{className:"px-2 sm:px-6 py-2"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(R=>{var A;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-2 sm:px-6 py-3 text-sm font-medium text-gray-900 truncate",children:((A=R.typeDeDeplacement)==null?void 0:A.nom)||"N/A"}),e.jsxs("td",{className:"px-2 sm:px-6 py-3 text-sm text-gray-500 truncate",children:[R.tarifParJour," DH"]}),e.jsx("td",{className:"px-2 sm:px-6 py-3 text-sm whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${O(R.statut)}`,children:R.statut==="en_attente"?"En attente":R.statut==="approuv√©"?"Approuv√©":"Rejet√©"})}),e.jsx("td",{className:"px-2 sm:px-6 py-3 text-sm text-gray-500 whitespace-nowrap",children:new Date(R.dateCreation).toLocaleDateString()}),e.jsxs("td",{className:"px-2 sm:px-6 py-3 text-right text-sm font-medium space-x-2",children:[e.jsx("button",{onClick:()=>t(R),disabled:D,className:"text-blue-600 cursor-pointer hover:text-blue-900",children:"Modifier"}),e.jsx("button",{onClick:()=>{I(R.id),Y(!0)},disabled:D,className:"text-red-600 cursor-pointer hover:text-red-900",children:"Supprimer"})]})]},R.id)})})]})}),e.jsx("div",{className:"sm:hidden space-y-4",children:o.map(R=>{var A;return e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow divide-y divide-gray-200",children:[e.jsxs("div",{className:"pb-2",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Type"}),e.jsx("p",{className:"font-medium text-gray-900 truncate",children:((A=R.typeDeDeplacement)==null?void 0:A.nom)||"N/A"})]}),e.jsxs("div",{className:"py-2 flex justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Tarif"}),e.jsxs("p",{className:"font-medium text-gray-900",children:[R.tarifParJour," DH"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Date"}),e.jsx("p",{className:"font-medium text-gray-900 whitespace-nowrap",children:new Date(R.dateCreation).toLocaleDateString()})]})]}),e.jsxs("div",{className:"py-2 flex items-center justify-between",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${O(R.statut)}`,children:R.statut==="en_attente"?"En attente":R.statut==="approuv√©"?"Approuv√©":"Rejet√©"}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>t(R),disabled:D,className:"text-blue-600 cursor-pointer hover:underline text-sm",children:"Modifier"}),e.jsx("button",{onClick:()=>{I(R.id),Y(!0)},disabled:D,className:"text-red-600 cursor-pointer hover:text-red-900",children:"Supprimer"})]})]})]},R.id)})})]})]}),e.jsx(Ee,{open:L,title:"Supprimer l'indemnit√© ?",message:"√ätes-vous s√ªr de vouloir supprimer cette indemnit√© journali√®re ?",onCancel:()=>{Y(!1),I(null)},onConfirm:X})]})}function ot(){return e.jsx(Ls,{children:e.jsxs(te,{element:e.jsx(Ys,{}),children:[e.jsx(te,{path:"/",element:e.jsx(es,{})}),e.jsx(te,{path:"/get-started",element:e.jsx(es,{})}),e.jsxs(te,{element:e.jsx(Us,{}),children:[e.jsx(te,{path:"/agentDashboard",element:e.jsx(ls,{})}),e.jsxs(te,{path:"/managerDashboard",element:e.jsx(rt,{}),children:[e.jsx(te,{index:!0,element:e.jsx(Pe,{})}),e.jsx(te,{path:"approve-accounts",element:e.jsx(Pe,{})}),e.jsx(te,{path:"expense-types",element:e.jsx(ps,{})}),e.jsx(te,{path:"displacement-types",element:e.jsx(hs,{})}),e.jsx(te,{path:"consult",element:e.jsx(gs,{})}),e.jsx(te,{path:"role",element:e.jsx(fs,{})}),e.jsx(te,{path:"taux-deplacement",element:e.jsx(ys,{})}),e.jsx(te,{path:"carrates",element:e.jsx(bs,{})}),e.jsx(te,{path:"chantier",element:e.jsx(js,{})})]}),e.jsx(te,{path:"/agentDashboard/:userId",element:e.jsx(ls,{})}),e.jsx(te,{path:"/profile-settings",element:e.jsx(at,{})}),e.jsx(te,{path:"/daily-returns",element:e.jsx(lt,{})})]}),e.jsx(te,{path:"*",element:e.jsx(ns,{to:"/",replace:!0})})]})})}function nt(){return e.jsx(Ps,{children:e.jsx(ot,{})})}qs.createRoot(document.getElementById("root")).render(e.jsx(c.StrictMode,{children:e.jsx(nt,{})}));
